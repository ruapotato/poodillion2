#!/usr/bin/pooscript
# find - search for files

# Simple find implementation
start_path = args[0] if len(args) > 0 and not args[0].startswith('-') else '.'
name_pattern = None

# Look for -name option
if '-name' in args:
    idx = args.index('-name')
    if idx + 1 < len(args):
        name_pattern = args[idx + 1]

def find_recursive(path, pattern):
    """Recursively find files"""
    results = []
    try:
        entries = vfs.listdetail(path)
        for entry in entries:
            name = entry['name']
            full_path = join_path(path, name)

            # Check if matches pattern
            if pattern is None or name == pattern:
                results.append(full_path)

            # Recurse into directories
            if entry['is_dir']:
                results.extend(find_recursive(full_path, pattern))
    except:
        pass  # Skip directories we can't read

    return results

results = find_recursive(start_path, name_pattern)
for result in results:
    print(result)

exit(0)
