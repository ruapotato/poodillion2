#!/usr/bin/pooscript
# ifconfig - configure network interface

# Get system interface
system = process.get_system()
if not system:
    error("ifconfig: Cannot access system")
    exit(1)

# Show all network interfaces
interfaces = system.interfaces

for iface_name in sorted(interfaces.keys()):
    ip_addr = interfaces[iface_name]

    if iface_name == 'lo':
        # Loopback interface
        print(f"{iface_name}: flags=73<UP,LOOPBACK,RUNNING>  mtu 65536")
        print(f"        inet {ip_addr}  netmask 255.0.0.0")
        print("        loop  txqueuelen 1000  (Local Loopback)")
        print()
    else:
        # Ethernet interface
        print(f"{iface_name}: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500")

        # Calculate broadcast address (x.x.x.255)
        broadcast = ip_addr.rsplit('.', 1)[0] + '.255'

        print(f"        inet {ip_addr}  netmask 255.255.255.0  broadcast {broadcast}")
        print("        ether 08:00:27:12:34:56  txqueuelen 1000  (Ethernet)")
        print()

exit(0)
