#!/usr/bin/pooscript
# ps - report process status

# Parse options
show_all = '-a' in args or '-e' in args
full_format = '-f' in args

# Get all processes
processes = process.list_all()

if full_format:
    # Full format header
    print("UID        PID  PPID  C STIME   TIME CMD")
    for p in processes:
        uid = p['uid']
        pid = p['pid']
        ppid = p['ppid']
        cmd = p['command']
        args_str = ' '.join(p['args'])
        print(f"{uid:<10} {pid:>4} {ppid:>5}  0 00:00  00:00 {cmd} {args_str}")
else:
    # Simple format
    print("  PID TTY          TIME CMD")
    for p in processes:
        pid = p['pid']
        cmd = p['command']
        print(f"{pid:>5} ?        00:00:00 {cmd}")

exit(0)
