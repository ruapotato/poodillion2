; Generated by Mini-Nim Compiler
bits 32

section .bss
terminal_row: resb 4
terminal_column: resb 4
terminal_color: resb 1

section .text
global main

    
vga_entry_color:
    push ebp
    mov ebp, esp
    mov eax, [ebp+8]
    mov [ebp-1], eax
    mov eax, [ebp+12]
    push eax
    mov eax, 4
    mov ebx, eax
    pop eax
    mov ecx, ebx
    shl eax, cl
    mov [ebp-2], eax
    mov eax, [ebp-1]
    push eax
    mov eax, [ebp-2]
    mov ebx, eax
    pop eax
    or eax, ebx
    mov [ebp-1], eax
    mov eax, [ebp-1]
    jmp .return
.return:
    mov esp, ebp
    pop ebp
    ret
    
vga_entry:
    push ebp
    mov ebp, esp
    mov eax, [ebp+8]
    mov [ebp-2], eax
    mov eax, [ebp+12]
    mov [ebp-4], eax
    mov eax, [ebp-4]
    push eax
    mov eax, 8
    mov ebx, eax
    pop eax
    mov ecx, ebx
    shl eax, cl
    mov [ebp-6], eax
    mov eax, [ebp-2]
    push eax
    mov eax, [ebp-6]
    mov ebx, eax
    pop eax
    or eax, ebx
    mov [ebp-8], eax
    mov eax, [ebp-8]
    jmp .return
.return:
    mov esp, ebp
    pop ebp
    ret
    
terminal_initialize:
    push ebp
    mov ebp, esp
    mov eax, 0
    mov [rel terminal_row], eax
    mov eax, 0
    mov [rel terminal_column], eax
    mov eax, 0
    push eax
    mov eax, 2
    push eax
    call vga_entry_color
    add esp, 8
    mov [rel terminal_color], eax
    mov eax, 753664
    mov [ebp-4], eax
    mov eax, 0
    mov [ebp-8], eax
    mov eax, 25
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    sub eax, ebx
    push eax
for_start0:
    mov eax, [ebp-8]
    mov ebx, [esp]
    cmp eax, ebx
    jg for_end1
    mov eax, 0
    mov [ebp-12], eax
    mov eax, 80
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    sub eax, ebx
    push eax
for_start2:
    mov eax, [ebp-12]
    mov ebx, [esp]
    cmp eax, ebx
    jg for_end3
    mov eax, [ebp+8]
    push eax
    mov eax, 80
    mov ebx, eax
    pop eax
    imul eax, ebx
    push eax
    mov eax, [ebp+12]
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-16], eax
    mov eax, [rel terminal_color]
    push eax
    mov eax, 32
    push eax
    call vga_entry
    add esp, 8
    push eax
    mov eax, [ebp-16]
    mov ebx, eax
    lea eax, [ebp--4]
    shl ebx, 1
    add eax, ebx
    pop ebx
    mov [eax], ebx
    inc dword [ebp-12]
    jmp for_start2
for_end3:
    add esp, 4
    inc dword [ebp-8]
    jmp for_start0
for_end1:
    add esp, 4
.return:
    mov esp, ebp
    pop ebp
    ret
    
terminal_putentryat:
    push ebp
    mov ebp, esp
    mov eax, 753664
    mov [ebp-4], eax
    mov eax, [ebp+20]
    push eax
    mov eax, 80
    mov ebx, eax
    pop eax
    imul eax, ebx
    push eax
    mov eax, [ebp+16]
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-8], eax
    mov eax, [ebp+12]
    push eax
    mov eax, [ebp+8]
    push eax
    call vga_entry
    add esp, 8
    push eax
    mov eax, [ebp-8]
    mov ebx, eax
    lea eax, [ebp--4]
    shl ebx, 1
    add eax, ebx
    pop ebx
    mov [eax], ebx
.return:
    mov esp, ebp
    pop ebp
    ret
    
terminal_writestr:
    push ebp
    mov ebp, esp
    mov eax, 0
    push eax
    mov eax, 2
    push eax
    call vga_entry_color
    add esp, 8
    mov [ebp-1], eax
    mov eax, 0
    mov [ebp-5], eax
    mov eax, [ebp+12]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    sub eax, ebx
    push eax
for_start4:
    mov eax, [ebp-5]
    mov ebx, [esp]
    cmp eax, ebx
    jg for_end5
    mov eax, [ebp+16]
    push eax
    mov eax, [ebp+5]
    push eax
    mov eax, [ebp-1]
    push eax
    mov eax, [ebp+5]
    mov ebx, eax
    lea eax, [ebp-8]
    shl ebx, 1
    add eax, ebx
    mov eax, [eax]
    push eax
    call terminal_putentryat
    add esp, 16
    inc dword [ebp-5]
    jmp for_start4
for_end5:
    add esp, 4
.return:
    mov esp, ebp
    pop ebp
    ret
    
main:
    push ebp
    mov ebp, esp
    call terminal_initialize
    mov eax, 0
    push eax
    mov eax, 2
    push eax
    call vga_entry_color
    add esp, 8
    mov [ebp-1], eax
    mov eax, 0
    push eax
    mov eax, 3
    push eax
    call vga_entry_color
    add esp, 8
    mov [ebp-2], eax
    mov eax, 0
    push eax
    mov eax, 15
    push eax
    call vga_entry_color
    add esp, 8
    mov [ebp-3], eax
    mov eax, 0
    push eax
    mov eax, 0
    push eax
    mov eax, [ebp-1]
    push eax
    mov eax, 80
    push eax
    call terminal_putentryat
    add esp, 16
    mov eax, 0
    push eax
    mov eax, 1
    push eax
    mov eax, [ebp-1]
    push eax
    mov eax, 111
    push eax
    call terminal_putentryat
    add esp, 16
    mov eax, 0
    push eax
    mov eax, 2
    push eax
    mov eax, [ebp-1]
    push eax
    mov eax, 111
    push eax
    call terminal_putentryat
    add esp, 16
    mov eax, 0
    push eax
    mov eax, 3
    push eax
    mov eax, [ebp-1]
    push eax
    mov eax, 100
    push eax
    call terminal_putentryat
    add esp, 16
    mov eax, 0
    push eax
    mov eax, 4
    push eax
    mov eax, [ebp-1]
    push eax
    mov eax, 105
    push eax
    call terminal_putentryat
    add esp, 16
    mov eax, 0
    push eax
    mov eax, 5
    push eax
    mov eax, [ebp-1]
    push eax
    mov eax, 108
    push eax
    call terminal_putentryat
    add esp, 16
    mov eax, 0
    push eax
    mov eax, 6
    push eax
    mov eax, [ebp-1]
    push eax
    mov eax, 108
    push eax
    call terminal_putentryat
    add esp, 16
    mov eax, 0
    push eax
    mov eax, 7
    push eax
    mov eax, [ebp-1]
    push eax
    mov eax, 105
    push eax
    call terminal_putentryat
    add esp, 16
    mov eax, 0
    push eax
    mov eax, 8
    push eax
    mov eax, [ebp-1]
    push eax
    mov eax, 111
    push eax
    call terminal_putentryat
    add esp, 16
    mov eax, 0
    push eax
    mov eax, 9
    push eax
    mov eax, [ebp-1]
    push eax
    mov eax, 110
    push eax
    call terminal_putentryat
    add esp, 16
    mov eax, 0
    push eax
    mov eax, 10
    push eax
    mov eax, [ebp-1]
    push eax
    mov eax, 79
    push eax
    call terminal_putentryat
    add esp, 16
    mov eax, 0
    push eax
    mov eax, 11
    push eax
    mov eax, [ebp-1]
    push eax
    mov eax, 83
    push eax
    call terminal_putentryat
    add esp, 16
    mov eax, 0
    push eax
    mov eax, 12
    push eax
    mov eax, [ebp-1]
    push eax
    mov eax, 32
    push eax
    call terminal_putentryat
    add esp, 16
    mov eax, 0
    push eax
    mov eax, 13
    push eax
    mov eax, [ebp-1]
    push eax
    mov eax, 118
    push eax
    call terminal_putentryat
    add esp, 16
    mov eax, 0
    push eax
    mov eax, 14
    push eax
    mov eax, [ebp-1]
    push eax
    mov eax, 48
    push eax
    call terminal_putentryat
    add esp, 16
    mov eax, 0
    push eax
    mov eax, 15
    push eax
    mov eax, [ebp-1]
    push eax
    mov eax, 46
    push eax
    call terminal_putentryat
    add esp, 16
    mov eax, 0
    push eax
    mov eax, 16
    push eax
    mov eax, [ebp-1]
    push eax
    mov eax, 49
    push eax
    call terminal_putentryat
    add esp, 16
    mov eax, 2
    push eax
    mov eax, 0
    push eax
    mov eax, [ebp-2]
    push eax
    mov eax, 75
    push eax
    call terminal_putentryat
    add esp, 16
    mov eax, 2
    push eax
    mov eax, 1
    push eax
    mov eax, [ebp-2]
    push eax
    mov eax, 101
    push eax
    call terminal_putentryat
    add esp, 16
    mov eax, 2
    push eax
    mov eax, 2
    push eax
    mov eax, [ebp-2]
    push eax
    mov eax, 114
    push eax
    call terminal_putentryat
    add esp, 16
    mov eax, 2
    push eax
    mov eax, 3
    push eax
    mov eax, [ebp-2]
    push eax
    mov eax, 110
    push eax
    call terminal_putentryat
    add esp, 16
    mov eax, 2
    push eax
    mov eax, 4
    push eax
    mov eax, [ebp-2]
    push eax
    mov eax, 101
    push eax
    call terminal_putentryat
    add esp, 16
    mov eax, 2
    push eax
    mov eax, 5
    push eax
    mov eax, [ebp-2]
    push eax
    mov eax, 108
    push eax
    call terminal_putentryat
    add esp, 16
    mov eax, 2
    push eax
    mov eax, 6
    push eax
    mov eax, [ebp-2]
    push eax
    mov eax, 58
    push eax
    call terminal_putentryat
    add esp, 16
    mov eax, 2
    push eax
    mov eax, 7
    push eax
    mov eax, [ebp-2]
    push eax
    mov eax, 32
    push eax
    call terminal_putentryat
    add esp, 16
    mov eax, 2
    push eax
    mov eax, 8
    push eax
    mov eax, [ebp-2]
    push eax
    mov eax, 77
    push eax
    call terminal_putentryat
    add esp, 16
    mov eax, 2
    push eax
    mov eax, 9
    push eax
    mov eax, [ebp-2]
    push eax
    mov eax, 105
    push eax
    call terminal_putentryat
    add esp, 16
    mov eax, 2
    push eax
    mov eax, 10
    push eax
    mov eax, [ebp-2]
    push eax
    mov eax, 110
    push eax
    call terminal_putentryat
    add esp, 16
    mov eax, 2
    push eax
    mov eax, 11
    push eax
    mov eax, [ebp-2]
    push eax
    mov eax, 105
    push eax
    call terminal_putentryat
    add esp, 16
    mov eax, 2
    push eax
    mov eax, 12
    push eax
    mov eax, [ebp-2]
    push eax
    mov eax, 45
    push eax
    call terminal_putentryat
    add esp, 16
    mov eax, 2
    push eax
    mov eax, 13
    push eax
    mov eax, [ebp-2]
    push eax
    mov eax, 78
    push eax
    call terminal_putentryat
    add esp, 16
    mov eax, 2
    push eax
    mov eax, 14
    push eax
    mov eax, [ebp-2]
    push eax
    mov eax, 105
    push eax
    call terminal_putentryat
    add esp, 16
    mov eax, 2
    push eax
    mov eax, 15
    push eax
    mov eax, [ebp-2]
    push eax
    mov eax, 109
    push eax
    call terminal_putentryat
    add esp, 16
    mov eax, 2
    push eax
    mov eax, 16
    push eax
    mov eax, [ebp-2]
    push eax
    mov eax, 33
    push eax
    call terminal_putentryat
    add esp, 16
    mov eax, 4
    push eax
    mov eax, 0
    push eax
    mov eax, [ebp-3]
    push eax
    mov eax, 66
    push eax
    call terminal_putentryat
    add esp, 16
    mov eax, 4
    push eax
    mov eax, 1
    push eax
    mov eax, [ebp-3]
    push eax
    mov eax, 111
    push eax
    call terminal_putentryat
    add esp, 16
    mov eax, 4
    push eax
    mov eax, 2
    push eax
    mov eax, [ebp-3]
    push eax
    mov eax, 111
    push eax
    call terminal_putentryat
    add esp, 16
    mov eax, 4
    push eax
    mov eax, 3
    push eax
    mov eax, [ebp-3]
    push eax
    mov eax, 116
    push eax
    call terminal_putentryat
    add esp, 16
    mov eax, 4
    push eax
    mov eax, 4
    push eax
    mov eax, [ebp-3]
    push eax
    mov eax, 101
    push eax
    call terminal_putentryat
    add esp, 16
    mov eax, 4
    push eax
    mov eax, 5
    push eax
    mov eax, [ebp-3]
    push eax
    mov eax, 100
    push eax
    call terminal_putentryat
    add esp, 16
    mov eax, 4
    push eax
    mov eax, 6
    push eax
    mov eax, [ebp-3]
    push eax
    mov eax, 32
    push eax
    call terminal_putentryat
    add esp, 16
    mov eax, 4
    push eax
    mov eax, 7
    push eax
    mov eax, [ebp-3]
    push eax
    mov eax, 79
    push eax
    call terminal_putentryat
    add esp, 16
    mov eax, 4
    push eax
    mov eax, 8
    push eax
    mov eax, [ebp-3]
    push eax
    mov eax, 75
    push eax
    call terminal_putentryat
    add esp, 16
    mov eax, 4
    push eax
    mov eax, 9
    push eax
    mov eax, [ebp-3]
    push eax
    mov eax, 33
    push eax
    call terminal_putentryat
    add esp, 16
while_start6:
    mov eax, 1
    test eax, eax
    jz while_end7
    jmp while_start6
while_end7:
.return:
    mov esp, ebp
    pop ebp
    ret