# Test 45: at_end() pattern using class (like lexer)
class Scanner:
    def __init__(self, text: str):
        self.text: str = text
        self.pos: int = 0
        self.length: int = len(text)

    def at_end(self) -> bool:
        return self.pos >= self.length

    def advance(self):
        self.pos = self.pos + 1

    def current(self) -> char:
        return self.text[self.pos]

def main() -> int:
    print("At end pattern test\n")

    s: Scanner = Scanner("abc")

    # Walk through string
    count: int = 0
    while not s.at_end():
        ch: char = s.current()
        count = count + 1
        s.advance()

    if count == 3:
        print("Count: OK\n")
    else:
        print("Count: FAIL\n")

    print("Done\n")
    return 0
