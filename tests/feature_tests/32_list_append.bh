# Test 32: List append operation
from lib.memory import alloc
from lib.list import list_init_i32, list_append_i32, list_get_i32, list_len

def main():
    print("Creating list...\n")

    # Allocate list header
    header: *int32 = alloc(16)
    print("Got header ptr\n")

    # Initialize list
    list_init_i32(header, 4)
    print("List initialized\n")

    # Append a value
    list_append_i32(header, 42)
    print("Appended 42\n")

    # Get length
    length: int32 = list_len(header)
    print("Length: ")
    if length == 1:
        print("1")
    else:
        print("not 1")
    print("\n")

    # Get value
    val: int32 = list_get_i32(header, 0)
    print("Value: ")
    if val == 42:
        print("42")
    else:
        print("not 42")
    print("\n")

    print("Done!\n")
