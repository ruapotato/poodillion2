# Test 80: Lexer with multi-field Token (simulating real lexer)
try:
    from typing import List
except:
    pass

class Token:
    def __init__(self, ttype: int, value: str, line: int, column: int, end_line: int = 0, end_column: int = 0):
        self.ttype: int = ttype
        self.value: str = value
        self.line: int = line
        self.column: int = column
        self.col: int = column
        self.end_line: int = end_line if end_line != 0 else line
        self.end_column: int = end_column if end_column != 0 else column

class Lexer:
    def __init__(self, source: str):
        self.source: str = source
        self.pos: int = 0
        self.line: int = 1
        self.column: int = 1
        self.tokens: List[Token] = []

    def at_end(self) -> bool:
        return self.pos >= len(self.source)

    def current_char(self) -> char:
        return self.source[self.pos]

    def advance(self):
        self.pos = self.pos + 1
        self.column = self.column + 1

    def make_token(self, ttype: int, value: str, start_line: int, start_col: int) -> Token:
        return Token(ttype, value, start_line, start_col, self.line, self.column)

    def tokenize(self) -> List[Token]:
        while not self.at_end():
            ch: char = self.current_char()
            start_line: int = self.line
            start_col: int = self.column

            # Skip whitespace
            if ch == ' ':
                self.advance()
                continue

            # Simple: treat every other char as identifier
            tok: Token = self.make_token(1, "id", start_line, start_col)
            self.tokens.append(tok)
            self.advance()

        return self.tokens

def main() -> int:
    print("Lexer multi-field test\n")

    code: str = "abc"
    print("Creating lexer\n")
    lexer: Lexer = Lexer(code)
    print("Tokenizing\n")
    tokens: List[Token] = lexer.tokenize()
    print("Done tokenizing\n")

    n: int = len(tokens)
    if n == 3:
        print("Count: OK\n")
    else:
        print("Count: FAIL\n")

    # Check first token
    t1: Token = tokens[0]
    if t1.ttype == 1:
        print("t1.ttype: OK\n")
    else:
        print("t1.ttype: FAIL\n")

    if t1.line == 1:
        print("t1.line: OK\n")
    else:
        print("t1.line: FAIL\n")

    if t1.column == 1:
        print("t1.column: OK\n")
    else:
        print("t1.column: FAIL\n")

    print("Done\n")
    return 0
