# Test 46: Class with char-returning method (like current_char)
class Reader:
    def __init__(self, text: str):
        self.text: str = text
        self.pos: int = 0
        self.length: int = len(text)

    def at_end(self) -> bool:
        return self.pos >= self.length

    def current_char(self) -> char:
        return self.text[self.pos]

    def advance(self):
        self.pos = self.pos + 1

def main() -> int:
    print("Char method test\n")

    r: Reader = Reader("ab")

    # First char
    if not r.at_end():
        ch: char = r.current_char()
        if ch == 'a':
            print("First: OK\n")
        else:
            print("First: FAIL\n")
        r.advance()

    # Second char
    if not r.at_end():
        ch2: char = r.current_char()
        if ch2 == 'b':
            print("Second: OK\n")
        else:
            print("Second: FAIL\n")
        r.advance()

    # At end
    if r.at_end():
        print("End: OK\n")
    else:
        print("End: FAIL\n")

    print("Done\n")
    return 0
