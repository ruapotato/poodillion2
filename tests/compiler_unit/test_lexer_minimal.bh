# Minimal test to isolate Lexer crash
# This file tests if the Lexer class can be instantiated and used

from lib.sys import exit

class SimpleLexer:
    def __init__(self, source: str):
        self.source = source
        self.pos = 0

    def current_char(self) -> str:
        if self.pos >= len(self.source):
            return ""
        return self.source[self.pos]

    def advance(self):
        self.pos = self.pos + 1

    def count_chars(self) -> int:
        count = 0
        while self.pos < len(self.source):
            self.advance()
            count = count + 1
        return count

def main():
    print("Creating lexer...\n")

    source = "hello"
    lex = SimpleLexer(source)

    print("Lexer created\n")

    count = lex.count_chars()

    print("Counted: ")
    # Can't easily print int, so just check if it works
    if count == 5:
        print("5\n")
    else:
        print("wrong\n")

    exit(0)
