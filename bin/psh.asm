; Generated by Brainhair Compiler
bits 32

extern syscall1
extern syscall2
extern syscall3

section .data
str_0: db "", 10, "", 0
str_1: db "0", 0
str_2: db "./bin/", 0
str_3: db "/bin/", 0
str_4: db "/usr/bin/", 0
str_5: db "./", 0
str_6: db "pwd: error getting current directory", 10, "", 0
str_7: db "cd: ", 0
str_8: db ": No such file or directory", 10, "", 0
str_9: db "/proc/self/environ", 0
str_10: db "env: cannot open /proc/self/environ", 10, "", 0
str_11: db "env: error reading environment", 10, "", 0
str_12: db "", 10, "", 0
str_13: db "pwd", 0
str_14: db "cd", 0
str_15: db "env", 0
str_16: db "history", 0
str_17: db "", 10, "┌─── Schema ───────────────────────┐", 10, "", 0
str_18: db "│ Magic:   ", 0
str_19: db "                     │", 10, "│ Version: ", 0
str_20: db "                        │", 10, "│ Fields:  ", 0
str_21: db "                        │", 10, "│ RecSize: ", 0
str_22: db " bytes                 │", 10, "└──────────────────────────────────┘", 10, "", 0
str_23: db "", 10, "┌─── Data (", 0
str_24: db " records) ───────────────┐", 10, "", 0
str_25: db "│ [", 0
str_26: db "] ", 0
str_27: db " ", 0
str_28: db "...", 0
str_29: db " │", 10, "", 0
str_30: db "└──────────────────────────────────┘", 10, "", 0
str_31: db "Error: pipe() failed", 10, "", 0
str_32: db "Error: exec failed: ", 0
str_33: db "", 10, "", 0
str_34: db "/bin", 0
str_35: db "", 10, "", 0
str_36: db "╔════════════════════════════════════════════════╗", 10, "", 0
str_37: db "║  BrainhairOS Shell - Type-Aware Data Shell   ║", 10, "", 0
str_38: db "║                                                ║", 10, "", 0
str_39: db "║  • Type-safe binary pipelines                 ║", 10, "", 0
str_40: db "║  • Automatic schema detection                 ║", 10, "", 0
str_41: db "║  • Pretty table formatting                    ║", 10, "", 0
str_42: db "║  • Tab completion for commands                ║", 10, "", 0
str_43: db "║                                                ║", 10, "", 0
str_44: db "║  Try: ps | ls -l                              ║", 10, "", 0
str_45: db "╚════════════════════════════════════════════════╝", 10, "", 0
str_46: db "", 10, "", 0
str_47: db "/root", 0
str_48: db "/proc/self/environ", 0
str_49: db "psh> ", 0
str_50: db "^C", 10, "", 0
str_51: db "", 10, "", 0
str_52: db "b b", 0
str_53: db " ", 0
str_54: db "", 10, "", 0
str_55: db "", 10, "psh> ", 0
str_56: db "b b", 0
str_57: db "", 10, "", 0
str_58: db "exit", 0
str_59: db "quit", 0
str_60: db "Goodbye!", 0

section .bss
g_orig_termios: resb 4
g_raw_termios: resb 4
g_cwd_buf: resb 4
g_prev_dir: resb 4
g_home_dir: resb 4
g_history: resb 4
g_history_count: resb 4
g_history_storage: resb 4

section .text
global _start
global get_argc
global get_argv

section .bss
_startup_esp: resd 1

section .text

_start:
    mov [_startup_esp], esp  ; Save initial stack pointer
    call main
    ; Exit with return code from main
    mov ebx, eax  ; Exit code
    mov eax, 1    ; sys_exit
    int 0x80

; get_argc() - returns argument count
get_argc:
    mov eax, [_startup_esp]
    mov eax, [eax]  ; argc is at [esp]
    ret

; get_argv(index) - returns pointer to argument string
get_argv:
    push ebp
    mov ebp, esp
    mov eax, [_startup_esp]
    mov ecx, [ebp+8]  ; index
    lea eax, [eax + 4 + ecx*4]  ; argv[index] = esp + 4 + index*4
    mov eax, [eax]
    pop ebp
    ret
    
print:
    push ebp
    mov ebp, esp
    sub esp, 4
    mov eax, 0
    mov [ebp-4], eax
while_start0:
    mov eax, [ebp-4]
    mov ebx, eax
    mov eax, [ebp+8]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setne al
    movzx eax, al
    test eax, eax
    jz while_end1
    mov eax, [ebp-4]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-4], eax
    jmp while_start0
while_end1:
    mov eax, [ebp-4]
    push eax
    mov eax, [ebp+8]
    push eax
    mov eax, 1
    push eax
    mov eax, 4
    push eax
    call syscall3
    add esp, 16
print_return:
    mov esp, ebp
    pop ebp
    ret
    
println:
    push ebp
    mov ebp, esp
    mov eax, [ebp+8]
    push eax
    call print
    add esp, 4
    mov eax, 1
    push eax
    lea eax, [rel str_0]
    push eax
    mov eax, 1
    push eax
    mov eax, 4
    push eax
    call syscall3
    add esp, 16
println_return:
    mov esp, ebp
    pop ebp
    ret
    
print_err:
    push ebp
    mov ebp, esp
    sub esp, 4
    mov eax, 0
    mov [ebp-4], eax
while_start2:
    mov eax, [ebp-4]
    mov ebx, eax
    mov eax, [ebp+8]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setne al
    movzx eax, al
    test eax, eax
    jz while_end3
    mov eax, [ebp-4]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-4], eax
    jmp while_start2
while_end3:
    mov eax, [ebp-4]
    push eax
    mov eax, [ebp+8]
    push eax
    mov eax, 2
    push eax
    mov eax, 4
    push eax
    call syscall3
    add esp, 16
print_err_return:
    mov esp, ebp
    pop ebp
    ret
    
print_num:
    push ebp
    mov ebp, esp
    sub esp, 28
    mov eax, [ebp+8]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else5
    mov eax, 1
    push eax
    lea eax, [rel str_1]
    push eax
    mov eax, 1
    push eax
    mov eax, 4
    push eax
    call syscall3
    add esp, 16
    jmp print_num_return
    jmp endif4
else5:
endif4:
    mov eax, 0
    push eax
    mov eax, 45
    push eax
    call syscall1
    add esp, 8
    mov [ebp-4], eax
    mov eax, [ebp-4]
    push eax
    mov eax, 32
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-8], eax
    mov eax, [ebp-8]
    push eax
    mov eax, 45
    push eax
    call syscall1
    add esp, 8
    mov eax, [ebp-4]
    mov [ebp-12], eax
    mov eax, [ebp+8]
    mov [ebp-16], eax
    mov eax, 0
    mov [ebp-20], eax
while_start6:
    mov eax, [ebp-16]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setg al
    movzx eax, al
    test eax, eax
    jz while_end7
    mov eax, [ebp-16]
    push eax
    mov eax, 10
    mov ebx, eax
    pop eax
    xor edx, edx
    idiv ebx
    mov eax, edx
    mov [ebp-24], eax
    mov eax, 48
    push eax
    mov eax, [ebp-24]
    mov ebx, eax
    pop eax
    add eax, ebx
    push eax
    mov eax, [ebp-20]
    mov ebx, eax
    mov eax, [ebp-12]
    add eax, ebx
    pop ebx
    mov byte [eax], bl
    mov eax, [ebp-20]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-20], eax
    mov eax, [ebp-16]
    push eax
    mov eax, 10
    mov ebx, eax
    pop eax
    xor edx, edx
    idiv ebx
    mov [ebp-16], eax
    jmp while_start6
while_end7:
    mov eax, [ebp-20]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    sub eax, ebx
    mov [ebp-28], eax
while_start8:
    mov eax, [ebp-28]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setge al
    movzx eax, al
    test eax, eax
    jz while_end9
    mov eax, 1
    push eax
    mov eax, [ebp-28]
    mov ebx, eax
    mov eax, [ebp-12]
    add eax, ebx
    push eax
    mov eax, 1
    push eax
    mov eax, 4
    push eax
    call syscall3
    add esp, 16
    mov eax, [ebp-28]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    sub eax, ebx
    mov [ebp-28], eax
    jmp while_start8
while_end9:
print_num_return:
    mov esp, ebp
    pop ebp
    ret
    
strlen:
    push ebp
    mov ebp, esp
    sub esp, 4
    mov eax, 0
    mov [ebp-4], eax
while_start10:
    mov eax, [ebp-4]
    mov ebx, eax
    mov eax, [ebp+8]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setne al
    movzx eax, al
    test eax, eax
    jz while_end11
    mov eax, [ebp-4]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-4], eax
    jmp while_start10
while_end11:
    mov eax, [ebp-4]
    jmp strlen_return
strlen_return:
    mov esp, ebp
    pop ebp
    ret
    
strcmp:
    push ebp
    mov ebp, esp
    sub esp, 4
    mov eax, 0
    mov [ebp-4], eax
while_start12:
    mov eax, [ebp-4]
    mov ebx, eax
    mov eax, [ebp+8]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setne al
    movzx eax, al
    test eax, eax
    jz while_end13
    mov eax, [ebp-4]
    mov ebx, eax
    mov eax, [ebp+8]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, [ebp-4]
    mov ebx, eax
    mov eax, [ebp+12]
    add eax, ebx
    movzx eax, byte [eax]
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setne al
    movzx eax, al
    test eax, eax
    jz else15
    mov eax, 1
    jmp strcmp_return
    jmp endif14
else15:
endif14:
    mov eax, [ebp-4]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-4], eax
    jmp while_start12
while_end13:
    mov eax, [ebp-4]
    mov ebx, eax
    mov eax, [ebp+12]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setne al
    movzx eax, al
    test eax, eax
    jz else17
    mov eax, 1
    jmp strcmp_return
    jmp endif16
else17:
endif16:
    mov eax, 0
    jmp strcmp_return
strcmp_return:
    mov esp, ebp
    pop ebp
    ret
    
strcpy:
    push ebp
    mov ebp, esp
    sub esp, 4
    mov eax, 0
    mov [ebp-4], eax
while_start18:
    mov eax, [ebp-4]
    mov ebx, eax
    mov eax, [ebp+12]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setne al
    movzx eax, al
    test eax, eax
    jz while_end19
    mov eax, [ebp-4]
    mov ebx, eax
    mov eax, [ebp+12]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, [ebp-4]
    mov ebx, eax
    mov eax, [ebp+8]
    add eax, ebx
    pop ebx
    mov byte [eax], bl
    mov eax, [ebp-4]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-4], eax
    jmp while_start18
while_end19:
    mov eax, 0
    push eax
    mov eax, [ebp-4]
    mov ebx, eax
    mov eax, [ebp+8]
    add eax, ebx
    pop ebx
    mov byte [eax], bl
strcpy_return:
    mov esp, ebp
    pop ebp
    ret
    
strcat:
    push ebp
    mov ebp, esp
    sub esp, 8
    mov eax, 0
    mov [ebp-4], eax
while_start20:
    mov eax, [ebp-4]
    mov ebx, eax
    mov eax, [ebp+8]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setne al
    movzx eax, al
    test eax, eax
    jz while_end21
    mov eax, [ebp-4]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-4], eax
    jmp while_start20
while_end21:
    mov eax, 0
    mov [ebp-8], eax
while_start22:
    mov eax, [ebp-8]
    mov ebx, eax
    mov eax, [ebp+12]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setne al
    movzx eax, al
    test eax, eax
    jz while_end23
    mov eax, [ebp-8]
    mov ebx, eax
    mov eax, [ebp+12]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, [ebp-4]
    mov ebx, eax
    mov eax, [ebp+8]
    add eax, ebx
    pop ebx
    mov byte [eax], bl
    mov eax, [ebp-4]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-4], eax
    mov eax, [ebp-8]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-8], eax
    jmp while_start22
while_end23:
    mov eax, 0
    push eax
    mov eax, [ebp-4]
    mov ebx, eax
    mov eax, [ebp+8]
    add eax, ebx
    pop ebx
    mov byte [eax], bl
strcat_return:
    mov esp, ebp
    pop ebp
    ret
    
memcpy:
    push ebp
    mov ebp, esp
    sub esp, 4
    mov eax, 0
    mov [ebp-4], eax
while_start24:
    mov eax, [ebp-4]
    push eax
    mov eax, [ebp+16]
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    test eax, eax
    jz while_end25
    mov eax, [ebp-4]
    mov ebx, eax
    mov eax, [ebp+12]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, [ebp-4]
    mov ebx, eax
    mov eax, [ebp+8]
    add eax, ebx
    pop ebx
    mov byte [eax], bl
    mov eax, [ebp-4]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-4], eax
    jmp while_start24
while_end25:
memcpy_return:
    mov esp, ebp
    pop ebp
    ret
    
save_termios:
    push ebp
    mov ebp, esp
    mov eax, [rel g_orig_termios]
    push eax
    mov eax, 21505
    push eax
    mov eax, 0
    push eax
    mov eax, 54
    push eax
    call syscall3
    add esp, 16
    mov eax, 36
    push eax
    mov eax, [rel g_orig_termios]
    push eax
    mov eax, [rel g_raw_termios]
    push eax
    call memcpy
    add esp, 12
save_termios_return:
    mov esp, ebp
    pop ebp
    ret
    
set_raw_mode:
    push ebp
    mov ebp, esp
    sub esp, 8
    mov eax, [rel g_raw_termios]
    push eax
    mov eax, 12
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-4], eax
    mov eax, 0
    mov ebx, eax
    mov eax, [ebp-4]
    shl ebx, 2
    add eax, ebx
    mov eax, [eax]
    mov [ebp-8], eax
    mov eax, [ebp-8]
    push eax
    mov eax, 0
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    sub eax, ebx
    push eax
    mov eax, 8
    mov ebx, eax
    pop eax
    sub eax, ebx
    push eax
    mov eax, 2
    mov ebx, eax
    pop eax
    sub eax, ebx
    mov ebx, eax
    pop eax
    and eax, ebx
    mov [ebp-8], eax
    mov eax, [ebp-8]
    push eax
    mov eax, 0
    mov ebx, eax
    mov eax, [ebp-4]
    shl ebx, 2
    add eax, ebx
    pop ebx
    mov [eax], ebx
    mov eax, [rel g_raw_termios]
    push eax
    mov eax, 21506
    push eax
    mov eax, 0
    push eax
    mov eax, 54
    push eax
    call syscall3
    add esp, 16
set_raw_mode_return:
    mov esp, ebp
    pop ebp
    ret
    
restore_termios:
    push ebp
    mov ebp, esp
    mov eax, [rel g_orig_termios]
    push eax
    mov eax, 21506
    push eax
    mov eax, 0
    push eax
    mov eax, 54
    push eax
    call syscall3
    add esp, 16
restore_termios_return:
    mov esp, ebp
    pop ebp
    ret
    
file_exists:
    push ebp
    mov ebp, esp
    sub esp, 4
    mov eax, 0
    push eax
    mov eax, [ebp+8]
    push eax
    mov eax, 33
    push eax
    call syscall2
    add esp, 12
    mov [ebp-4], eax
    mov eax, [ebp-4]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else27
    mov eax, 1
    jmp file_exists_return
    jmp endif26
else27:
endif26:
    mov eax, 0
    jmp file_exists_return
file_exists_return:
    mov esp, ebp
    pop ebp
    ret
    
resolve_path:
    push ebp
    mov ebp, esp
    mov eax, 0
    mov ebx, eax
    mov eax, [ebp+8]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, 47
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else29
    mov eax, [ebp+8]
    push eax
    mov eax, [ebp+12]
    push eax
    call strcpy
    add esp, 8
    mov eax, [ebp+12]
    jmp resolve_path_return
    jmp endif28
else29:
endif28:
    mov eax, 0
    mov ebx, eax
    mov eax, [ebp+8]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, 46
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else31
    mov eax, [ebp+8]
    push eax
    mov eax, [ebp+12]
    push eax
    call strcpy
    add esp, 8
    mov eax, [ebp+12]
    jmp resolve_path_return
    jmp endif30
else31:
endif30:
    lea eax, [rel str_2]
    push eax
    mov eax, [ebp+12]
    push eax
    call strcpy
    add esp, 8
    mov eax, [ebp+8]
    push eax
    mov eax, [ebp+12]
    push eax
    call strcat
    add esp, 8
    mov eax, [ebp+12]
    push eax
    call file_exists
    add esp, 4
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setne al
    movzx eax, al
    test eax, eax
    jz else33
    mov eax, [ebp+12]
    jmp resolve_path_return
    jmp endif32
else33:
endif32:
    lea eax, [rel str_3]
    push eax
    mov eax, [ebp+12]
    push eax
    call strcpy
    add esp, 8
    mov eax, [ebp+8]
    push eax
    mov eax, [ebp+12]
    push eax
    call strcat
    add esp, 8
    mov eax, [ebp+12]
    push eax
    call file_exists
    add esp, 4
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setne al
    movzx eax, al
    test eax, eax
    jz else35
    mov eax, [ebp+12]
    jmp resolve_path_return
    jmp endif34
else35:
endif34:
    lea eax, [rel str_4]
    push eax
    mov eax, [ebp+12]
    push eax
    call strcpy
    add esp, 8
    mov eax, [ebp+8]
    push eax
    mov eax, [ebp+12]
    push eax
    call strcat
    add esp, 8
    mov eax, [ebp+12]
    push eax
    call file_exists
    add esp, 4
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setne al
    movzx eax, al
    test eax, eax
    jz else37
    mov eax, [ebp+12]
    jmp resolve_path_return
    jmp endif36
else37:
endif36:
    mov eax, 0
    mov ebx, eax
    mov eax, [ebp+8]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, 47
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else39
    mov eax, [ebp+8]
    push eax
    mov eax, [ebp+12]
    push eax
    call strcpy
    add esp, 8
    jmp endif38
else39:
    lea eax, [rel str_5]
    push eax
    mov eax, [ebp+12]
    push eax
    call strcpy
    add esp, 8
    mov eax, [ebp+8]
    push eax
    mov eax, [ebp+12]
    push eax
    call strcat
    add esp, 8
endif38:
    mov eax, [ebp+12]
    jmp resolve_path_return
resolve_path_return:
    mov esp, ebp
    pop ebp
    ret
    
get_cwd:
    push ebp
    mov ebp, esp
    sub esp, 4
    mov eax, [ebp+12]
    push eax
    mov eax, [ebp+8]
    push eax
    mov eax, 183
    push eax
    call syscall2
    add esp, 12
    mov [ebp-4], eax
    mov eax, [ebp-4]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    test eax, eax
    jz else41
    mov eax, 1
    neg eax
    jmp get_cwd_return
    jmp endif40
else41:
endif40:
    mov eax, [ebp+8]
    push eax
    call strlen
    add esp, 4
    jmp get_cwd_return
get_cwd_return:
    mov esp, ebp
    pop ebp
    ret
    
builtin_pwd:
    push ebp
    mov ebp, esp
    sub esp, 4
    mov eax, 512
    push eax
    mov eax, [rel g_cwd_buf]
    push eax
    call get_cwd
    add esp, 8
    mov [ebp-4], eax
    mov eax, [ebp-4]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    test eax, eax
    jz else43
    lea eax, [rel str_6]
    push eax
    call print_err
    add esp, 4
    mov eax, 1
    jmp builtin_pwd_return
    jmp endif42
else43:
endif42:
    mov eax, [rel g_cwd_buf]
    push eax
    call println
    add esp, 4
    mov eax, 0
    jmp builtin_pwd_return
builtin_pwd_return:
    mov esp, ebp
    pop ebp
    ret
    
builtin_cd:
    push ebp
    mov ebp, esp
    sub esp, 8
    mov eax, [ebp+8]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else45
    mov eax, [rel g_home_dir]
    mov [ebp-4], eax
    jmp endif44
else45:
    mov eax, [ebp+8]
    mov [ebp-4], eax
endif44:
    mov eax, [ebp-4]
    push eax
    mov eax, 12
    push eax
    call syscall1
    add esp, 8
    mov [ebp-8], eax
    mov eax, [ebp-8]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setne al
    movzx eax, al
    test eax, eax
    jz else47
    lea eax, [rel str_7]
    push eax
    call print_err
    add esp, 4
    mov eax, [ebp-4]
    push eax
    call print_err
    add esp, 4
    lea eax, [rel str_8]
    push eax
    call print_err
    add esp, 4
    mov eax, 1
    jmp builtin_cd_return
    jmp endif46
else47:
endif46:
    mov eax, 0
    jmp builtin_cd_return
builtin_cd_return:
    mov esp, ebp
    pop ebp
    ret
    
builtin_env:
    push ebp
    mov ebp, esp
    sub esp, 28
    mov eax, 0
    push eax
    mov eax, 0
    push eax
    lea eax, [rel str_9]
    push eax
    mov eax, 5
    push eax
    call syscall3
    add esp, 16
    mov [ebp-4], eax
    mov eax, [ebp-4]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    test eax, eax
    jz else49
    lea eax, [rel str_10]
    push eax
    call print_err
    add esp, 4
    mov eax, 1
    jmp builtin_env_return
    jmp endif48
else49:
endif48:
    mov eax, 0
    push eax
    mov eax, 45
    push eax
    call syscall1
    add esp, 8
    mov [ebp-8], eax
    mov eax, [ebp-8]
    push eax
    mov eax, 8192
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-12], eax
    mov eax, [ebp-12]
    push eax
    mov eax, 45
    push eax
    call syscall1
    add esp, 8
    mov eax, [ebp-8]
    mov [ebp-16], eax
    mov eax, 8000
    push eax
    mov eax, [ebp-16]
    push eax
    mov eax, [ebp-4]
    push eax
    mov eax, 3
    push eax
    call syscall3
    add esp, 16
    mov [ebp-20], eax
    mov eax, [ebp-4]
    push eax
    mov eax, 6
    push eax
    call syscall1
    add esp, 8
    mov eax, [ebp-20]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setle al
    movzx eax, al
    test eax, eax
    jz else51
    lea eax, [rel str_11]
    push eax
    call print_err
    add esp, 4
    mov eax, 1
    jmp builtin_env_return
    jmp endif50
else51:
endif50:
    mov eax, 0
    mov [ebp-24], eax
while_start52:
    mov eax, [ebp-24]
    push eax
    mov eax, [ebp-20]
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    test eax, eax
    jz while_end53
    mov eax, [ebp-24]
    mov ebx, eax
    mov eax, [ebp-16]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else55
    mov eax, 1
    push eax
    lea eax, [rel str_12]
    push eax
    mov eax, 1
    push eax
    mov eax, 4
    push eax
    call syscall3
    add esp, 16
    mov eax, [ebp-24]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-24], eax
    jmp endif54
else55:
    mov eax, [ebp-24]
    mov [ebp-28], eax
while_start56:
    mov eax, [ebp-24]
    push eax
    mov eax, [ebp-20]
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    test eax, eax
    jz while_end57
    mov eax, [ebp-24]
    mov ebx, eax
    mov eax, [ebp-16]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else59
    jmp while_end57
    jmp endif58
else59:
endif58:
    mov eax, [ebp-24]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-24], eax
    jmp while_start56
while_end57:
    mov eax, [ebp-24]
    push eax
    mov eax, [ebp-28]
    mov ebx, eax
    pop eax
    sub eax, ebx
    push eax
    mov eax, [ebp-16]
    push eax
    mov eax, [ebp-28]
    mov ebx, eax
    pop eax
    add eax, ebx
    push eax
    mov eax, 1
    push eax
    mov eax, 4
    push eax
    call syscall3
    add esp, 16
endif54:
    jmp while_start52
while_end53:
    mov eax, 0
    jmp builtin_env_return
builtin_env_return:
    mov esp, ebp
    pop ebp
    ret
    
builtin_history:
    push ebp
    mov ebp, esp
    sub esp, 8
    mov eax, 0
    mov [ebp-4], eax
while_start60:
    mov eax, [ebp-4]
    push eax
    mov eax, [rel g_history_count]
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    test eax, eax
    jz while_end61
    mov eax, [ebp-4]
    mov ebx, eax
    lea eax, [rel g_history]
    add eax, ebx
    movzx eax, byte [eax]
    mov [ebp-8], eax
    mov eax, [ebp-8]
    push eax
    call println
    add esp, 4
    mov eax, [ebp-4]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-4], eax
    jmp while_start60
while_end61:
    mov eax, 0
    jmp builtin_history_return
builtin_history_return:
    mov esp, ebp
    pop ebp
    ret
    
add_to_history:
    push ebp
    mov ebp, esp
    sub esp, 12
    mov eax, [ebp+8]
    push eax
    call strlen
    add esp, 4
    mov [ebp-4], eax
    mov eax, [ebp-4]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else63
    jmp add_to_history_return
    jmp endif62
else63:
endif62:
    mov eax, [rel g_history_count]
    push eax
    mov eax, 20
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    test eax, eax
    jz else65
    mov eax, [rel g_history_count]
    push eax
    mov eax, 256
    mov ebx, eax
    pop eax
    imul eax, ebx
    mov [ebp-8], eax
    mov eax, [rel g_history_storage]
    push eax
    mov eax, [ebp-8]
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-12], eax
    mov eax, [ebp+8]
    push eax
    mov eax, [ebp-12]
    push eax
    call strcpy
    add esp, 8
    mov eax, [ebp-12]
    push eax
    mov eax, [rel g_history_count]
    mov ebx, eax
    lea eax, [rel g_history]
    add eax, ebx
    pop ebx
    mov byte [eax], bl
    mov eax, [rel g_history_count]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [rel g_history_count], eax
    jmp endif64
else65:
endif64:
add_to_history_return:
    mov esp, ebp
    pop ebp
    ret
    
try_builtin_impl:
    push ebp
    mov ebp, esp
    sub esp, 8
    mov eax, 0
    mov [ebp-4], eax
while_start66:
    mov eax, [ebp-4]
    mov ebx, eax
    mov eax, [ebp+8]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setne al
    movzx eax, al
    test eax, eax
    jz while_end67
    mov eax, [ebp-4]
    mov ebx, eax
    mov eax, [ebp+8]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, 32
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else69
    jmp while_end67
    jmp endif68
else69:
endif68:
    mov eax, [ebp-4]
    mov ebx, eax
    mov eax, [ebp+8]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, [ebp-4]
    mov ebx, eax
    mov eax, [ebp+12]
    add eax, ebx
    pop ebx
    mov byte [eax], bl
    mov eax, [ebp-4]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-4], eax
    jmp while_start66
while_end67:
    mov eax, 0
    push eax
    mov eax, [ebp-4]
    mov ebx, eax
    mov eax, [ebp+12]
    add eax, ebx
    pop ebx
    mov byte [eax], bl
while_start70:
    mov eax, [ebp-4]
    mov ebx, eax
    mov eax, [ebp+8]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, 32
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz while_end71
    mov eax, [ebp-4]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-4], eax
    jmp while_start70
while_end71:
    mov eax, [ebp-4]
    mov ebx, eax
    mov eax, [ebp+8]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else73
    mov eax, 0
    mov [ebp-8], eax
    jmp endif72
else73:
    mov eax, [ebp+8]
    push eax
    mov eax, [ebp-4]
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-8], eax
endif72:
    lea eax, [rel str_13]
    push eax
    mov eax, [ebp+12]
    push eax
    call strcmp
    add esp, 8
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else75
    call builtin_pwd
    mov eax, 1
    jmp try_builtin_impl_return
    jmp endif74
else75:
endif74:
    lea eax, [rel str_14]
    push eax
    mov eax, [ebp+12]
    push eax
    call strcmp
    add esp, 8
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else77
    mov eax, [ebp-8]
    push eax
    call builtin_cd
    add esp, 4
    mov eax, 1
    jmp try_builtin_impl_return
    jmp endif76
else77:
endif76:
    lea eax, [rel str_15]
    push eax
    mov eax, [ebp+12]
    push eax
    call strcmp
    add esp, 8
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else79
    call builtin_env
    mov eax, 1
    jmp try_builtin_impl_return
    jmp endif78
else79:
endif78:
    lea eax, [rel str_16]
    push eax
    mov eax, [ebp+12]
    push eax
    call strcmp
    add esp, 8
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else81
    call builtin_history
    mov eax, 1
    jmp try_builtin_impl_return
    jmp endif80
else81:
endif80:
    mov eax, 0
    jmp try_builtin_impl_return
try_builtin_impl_return:
    mov esp, ebp
    pop ebp
    ret
    
display_schema:
    push ebp
    mov ebp, esp
    sub esp, 8
    lea eax, [rel str_17]
    push eax
    call print
    add esp, 4
    lea eax, [rel str_18]
    push eax
    call print
    add esp, 4
    mov eax, 0
    mov [ebp-4], eax
while_start82:
    mov eax, [ebp-4]
    push eax
    mov eax, 4
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    test eax, eax
    jz while_end83
    mov eax, 1
    push eax
    mov eax, [ebp+8]
    push eax
    mov eax, [ebp-4]
    mov ebx, eax
    pop eax
    add eax, ebx
    push eax
    mov eax, 1
    push eax
    mov eax, 4
    push eax
    call syscall3
    add esp, 16
    mov eax, [ebp-4]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-4], eax
    jmp while_start82
while_end83:
    lea eax, [rel str_19]
    push eax
    call print
    add esp, 4
    mov eax, 4
    mov ebx, eax
    mov eax, [ebp+8]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    call print_num
    add esp, 4
    lea eax, [rel str_20]
    push eax
    call print
    add esp, 4
    mov eax, 5
    mov ebx, eax
    mov eax, [ebp+8]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    call print_num
    add esp, 4
    lea eax, [rel str_21]
    push eax
    call print
    add esp, 4
    mov eax, [ebp+8]
    push eax
    mov eax, 6
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-8], eax
    mov eax, 0
    mov ebx, eax
    mov eax, [ebp-8]
    shl ebx, 1
    add eax, ebx
    movzx eax, word [eax]
    push eax
    call print_num
    add esp, 4
    lea eax, [rel str_22]
    push eax
    call print
    add esp, 4
display_schema_return:
    mov esp, ebp
    pop ebp
    ret
    
display_records:
    push ebp
    mov ebp, esp
    sub esp, 17
    lea eax, [rel str_23]
    push eax
    call print
    add esp, 4
    mov eax, [ebp+12]
    push eax
    call print_num
    add esp, 4
    lea eax, [rel str_24]
    push eax
    call print
    add esp, 4
    mov eax, 0
    mov [ebp-4], eax
while_start84:
    mov eax, [ebp-4]
    push eax
    mov eax, [ebp+12]
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    test eax, eax
    jz while_end85
    lea eax, [rel str_25]
    push eax
    call print
    add esp, 4
    mov eax, [ebp-4]
    push eax
    call print_num
    add esp, 4
    lea eax, [rel str_26]
    push eax
    call print
    add esp, 4
    mov eax, 12
    mov [ebp-8], eax
    mov eax, [ebp+16]
    push eax
    mov eax, [ebp-8]
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    test eax, eax
    jz else87
    mov eax, [ebp+16]
    mov [ebp-8], eax
    jmp endif86
else87:
endif86:
    mov eax, 0
    mov [ebp-12], eax
while_start88:
    mov eax, [ebp-12]
    push eax
    mov eax, [ebp-8]
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    test eax, eax
    jz while_end89
    mov eax, 12
    push eax
    mov eax, [ebp-4]
    push eax
    mov eax, [ebp+16]
    mov ebx, eax
    pop eax
    imul eax, ebx
    mov ebx, eax
    pop eax
    add eax, ebx
    push eax
    mov eax, [ebp-12]
    mov ebx, eax
    pop eax
    add eax, ebx
    mov ebx, eax
    mov eax, [ebp+8]
    add eax, ebx
    movzx eax, byte [eax]
    mov byte [ebp-13], al
    movzx eax, byte [ebp-13]
    push eax
    mov eax, 4
    mov ebx, eax
    pop eax
    mov ecx, ebx
    shr eax, cl
    mov byte [ebp-14], al
    movzx eax, byte [ebp-13]
    push eax
    mov eax, 15
    mov ebx, eax
    pop eax
    and eax, ebx
    mov byte [ebp-15], al
    mov eax, 48
    push eax
    movzx eax, byte [ebp-14]
    mov ebx, eax
    pop eax
    add eax, ebx
    mov byte [ebp-16], al
    movzx eax, byte [ebp-14]
    push eax
    mov eax, 9
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setg al
    movzx eax, al
    test eax, eax
    jz else91
    mov eax, 97
    push eax
    movzx eax, byte [ebp-14]
    mov ebx, eax
    pop eax
    add eax, ebx
    push eax
    mov eax, 10
    mov ebx, eax
    pop eax
    sub eax, ebx
    mov byte [ebp-16], al
    jmp endif90
else91:
endif90:
    mov eax, 48
    push eax
    movzx eax, byte [ebp-15]
    mov ebx, eax
    pop eax
    add eax, ebx
    mov byte [ebp-17], al
    movzx eax, byte [ebp-15]
    push eax
    mov eax, 9
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setg al
    movzx eax, al
    test eax, eax
    jz else93
    mov eax, 97
    push eax
    movzx eax, byte [ebp-15]
    mov ebx, eax
    pop eax
    add eax, ebx
    push eax
    mov eax, 10
    mov ebx, eax
    pop eax
    sub eax, ebx
    mov byte [ebp-17], al
    jmp endif92
else93:
endif92:
    mov eax, 1
    push eax
    lea eax, [ebp-16]
    push eax
    mov eax, 1
    push eax
    mov eax, 4
    push eax
    call syscall3
    add esp, 16
    mov eax, 1
    push eax
    lea eax, [ebp-17]
    push eax
    mov eax, 1
    push eax
    mov eax, 4
    push eax
    call syscall3
    add esp, 16
    mov eax, 1
    push eax
    lea eax, [rel str_27]
    push eax
    mov eax, 1
    push eax
    mov eax, 4
    push eax
    call syscall3
    add esp, 16
    mov eax, [ebp-12]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-12], eax
    jmp while_start88
while_end89:
    mov eax, [ebp+16]
    push eax
    mov eax, [ebp-8]
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setg al
    movzx eax, al
    test eax, eax
    jz else95
    lea eax, [rel str_28]
    push eax
    call print
    add esp, 4
    jmp endif94
else95:
endif94:
    lea eax, [rel str_29]
    push eax
    call print
    add esp, 4
    mov eax, [ebp-4]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-4], eax
    jmp while_start84
while_end85:
    lea eax, [rel str_30]
    push eax
    call print
    add esp, 4
display_records_return:
    mov esp, ebp
    pop ebp
    ret
    
trim_start:
    push ebp
    mov ebp, esp
    sub esp, 4
    mov eax, 0
    mov [ebp-4], eax
while_start96:
    mov eax, [ebp-4]
    mov ebx, eax
    mov eax, [ebp+8]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, 32
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz while_end97
    mov eax, [ebp-4]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-4], eax
    jmp while_start96
while_end97:
    mov eax, [ebp+8]
    push eax
    mov eax, [ebp-4]
    mov ebx, eax
    pop eax
    add eax, ebx
    jmp trim_start_return
trim_start_return:
    mov esp, ebp
    pop ebp
    ret
    
trim_end:
    push ebp
    mov ebp, esp
    sub esp, 4
    mov eax, [ebp+8]
    push eax
    call strlen
    add esp, 4
    mov [ebp-4], eax
while_start98:
    mov eax, [ebp-4]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setg al
    movzx eax, al
    test eax, eax
    jz while_end99
    mov eax, [ebp-4]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    sub eax, ebx
    mov ebx, eax
    mov eax, [ebp+8]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, 32
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else101
    mov eax, 0
    push eax
    mov eax, [ebp-4]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    sub eax, ebx
    mov ebx, eax
    mov eax, [ebp+8]
    add eax, ebx
    pop ebx
    mov byte [eax], bl
    mov eax, [ebp-4]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    sub eax, ebx
    mov [ebp-4], eax
    jmp endif100
else101:
    jmp trim_end_return
endif100:
    jmp while_start98
while_end99:
trim_end_return:
    mov esp, ebp
    pop ebp
    ret
    
find_pipe:
    push ebp
    mov ebp, esp
    sub esp, 4
    mov eax, 0
    mov [ebp-4], eax
while_start102:
    mov eax, [ebp-4]
    mov ebx, eax
    mov eax, [ebp+8]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setne al
    movzx eax, al
    test eax, eax
    jz while_end103
    mov eax, [ebp-4]
    mov ebx, eax
    mov eax, [ebp+8]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, 124
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else105
    mov eax, [ebp-4]
    jmp find_pipe_return
    jmp endif104
else105:
endif104:
    mov eax, [ebp-4]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-4], eax
    jmp while_start102
while_end103:
    mov eax, 1
    neg eax
    jmp find_pipe_return
find_pipe_return:
    mov esp, ebp
    pop ebp
    ret
    
count_commands:
    push ebp
    mov ebp, esp
    sub esp, 8
    mov eax, 1
    mov [ebp-4], eax
    mov eax, 0
    mov [ebp-8], eax
while_start106:
    mov eax, [ebp-8]
    mov ebx, eax
    mov eax, [ebp+8]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setne al
    movzx eax, al
    test eax, eax
    jz while_end107
    mov eax, [ebp-8]
    mov ebx, eax
    mov eax, [ebp+8]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, 124
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else109
    mov eax, [ebp-4]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-4], eax
    jmp endif108
else109:
endif108:
    mov eax, [ebp-8]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-8], eax
    jmp while_start106
while_end107:
    mov eax, [ebp-4]
    jmp count_commands_return
count_commands_return:
    mov esp, ebp
    pop ebp
    ret
    
needs_dot_slash:
    push ebp
    mov ebp, esp
    mov eax, 0
    mov ebx, eax
    mov eax, [ebp+8]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, 47
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else111
    mov eax, 0
    jmp needs_dot_slash_return
    jmp endif110
else111:
endif110:
    mov eax, 0
    mov ebx, eax
    mov eax, [ebp+8]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, 46
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else113
    mov eax, 0
    jmp needs_dot_slash_return
    jmp endif112
else113:
endif112:
    mov eax, 1
    jmp needs_dot_slash_return
needs_dot_slash_return:
    mov esp, ebp
    pop ebp
    ret
    
make_exec_path:
    push ebp
    mov ebp, esp
    sub esp, 4
    mov eax, [ebp+8]
    push eax
    call needs_dot_slash
    add esp, 4
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else115
    mov eax, [ebp+8]
    push eax
    mov eax, [ebp+12]
    push eax
    call strcpy
    add esp, 8
    mov eax, [ebp+12]
    jmp make_exec_path_return
    jmp endif114
else115:
endif114:
    mov eax, 46
    push eax
    mov eax, 0
    mov ebx, eax
    mov eax, [ebp+12]
    add eax, ebx
    pop ebx
    mov byte [eax], bl
    mov eax, 47
    push eax
    mov eax, 1
    mov ebx, eax
    mov eax, [ebp+12]
    add eax, ebx
    pop ebx
    mov byte [eax], bl
    mov eax, 0
    mov [ebp-4], eax
while_start116:
    mov eax, [ebp-4]
    mov ebx, eax
    mov eax, [ebp+8]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setne al
    movzx eax, al
    test eax, eax
    jz while_end117
    mov eax, [ebp-4]
    mov ebx, eax
    mov eax, [ebp+8]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, [ebp-4]
    push eax
    mov eax, 2
    mov ebx, eax
    pop eax
    add eax, ebx
    mov ebx, eax
    mov eax, [ebp+12]
    add eax, ebx
    pop ebx
    mov byte [eax], bl
    mov eax, [ebp-4]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-4], eax
    jmp while_start116
while_end117:
    mov eax, 0
    push eax
    mov eax, [ebp-4]
    push eax
    mov eax, 2
    mov ebx, eax
    pop eax
    add eax, ebx
    mov ebx, eax
    mov eax, [ebp+12]
    add eax, ebx
    pop ebx
    mov byte [eax], bl
    mov eax, [ebp+12]
    jmp make_exec_path_return
make_exec_path_return:
    mov esp, ebp
    pop ebp
    ret
    
parse_args:
    push ebp
    mov ebp, esp
    sub esp, 16
    mov eax, 0
    mov [ebp-4], eax
    mov eax, 0
    mov [ebp-8], eax
    mov eax, 0
    mov [ebp-12], eax
while_start118:
    mov eax, [ebp-8]
    mov ebx, eax
    mov eax, [ebp+8]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, 32
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz while_end119
    mov eax, [ebp-8]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-8], eax
    jmp while_start118
while_end119:
while_start120:
    mov eax, [ebp-8]
    mov ebx, eax
    mov eax, [ebp+8]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setne al
    movzx eax, al
    test eax, eax
    jz while_end121
    mov eax, [ebp-12]
    mov [ebp-16], eax
while_start122:
    mov eax, [ebp-8]
    mov ebx, eax
    mov eax, [ebp+8]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setne al
    movzx eax, al
    test eax, eax
    jz while_end123
    mov eax, [ebp-8]
    mov ebx, eax
    mov eax, [ebp+8]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, 32
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else125
    jmp while_end123
    jmp endif124
else125:
endif124:
    mov eax, [ebp-8]
    mov ebx, eax
    mov eax, [ebp+8]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, [ebp-12]
    mov ebx, eax
    mov eax, [ebp+12]
    add eax, ebx
    pop ebx
    mov byte [eax], bl
    mov eax, [ebp-12]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-12], eax
    mov eax, [ebp-8]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-8], eax
    jmp while_start122
while_end123:
    mov eax, 0
    push eax
    mov eax, [ebp-12]
    mov ebx, eax
    mov eax, [ebp+12]
    add eax, ebx
    pop ebx
    mov byte [eax], bl
    mov eax, [ebp-12]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-12], eax
    mov eax, [ebp+12]
    push eax
    mov eax, [ebp-16]
    mov ebx, eax
    pop eax
    add eax, ebx
    push eax
    mov eax, [ebp-4]
    mov ebx, eax
    mov eax, [ebp+16]
    shl ebx, 2
    add eax, ebx
    pop ebx
    mov [eax], ebx
    mov eax, [ebp-4]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-4], eax
while_start126:
    mov eax, [ebp-8]
    mov ebx, eax
    mov eax, [ebp+8]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, 32
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz while_end127
    mov eax, [ebp-8]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-8], eax
    jmp while_start126
while_end127:
    mov eax, [ebp-4]
    push eax
    mov eax, 15
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setge al
    movzx eax, al
    test eax, eax
    jz else129
    jmp while_end121
    jmp endif128
else129:
endif128:
    jmp while_start120
while_end121:
    mov eax, 0
    push eax
    mov eax, [ebp-4]
    mov ebx, eax
    mov eax, [ebp+16]
    shl ebx, 2
    add eax, ebx
    pop ebx
    mov [eax], ebx
    mov eax, [ebp-4]
    jmp parse_args_return
parse_args_return:
    mov esp, ebp
    pop ebp
    ret
    
exec_pipeline:
    push ebp
    mov ebp, esp
    sub esp, 144
    mov eax, 0
    push eax
    mov eax, 45
    push eax
    call syscall1
    add esp, 8
    mov [ebp-4], eax
    mov eax, [ebp-4]
    push eax
    mov eax, 32768
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-8], eax
    mov eax, [ebp-8]
    push eax
    mov eax, 45
    push eax
    call syscall1
    add esp, 8
    mov eax, [ebp-4]
    mov [ebp-12], eax
    mov eax, [ebp-4]
    push eax
    mov eax, 8192
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-16], eax
    mov eax, [ebp-4]
    push eax
    mov eax, 16384
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-20], eax
    mov eax, [ebp-4]
    push eax
    mov eax, 16640
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-24], eax
    mov eax, [ebp-4]
    push eax
    mov eax, 16896
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-28], eax
    mov eax, [ebp-4]
    push eax
    mov eax, 17152
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-32], eax
    mov eax, [ebp-4]
    push eax
    mov eax, 19200
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-36], eax
    mov eax, [ebp-4]
    push eax
    mov eax, 27392
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-40], eax
    mov eax, 0
    mov [ebp-44], eax
    mov eax, 0
    mov [ebp-48], eax
    mov eax, 0
    mov [ebp-52], eax
    mov eax, [ebp-52]
    mov [ebp-56], eax
while_start130:
    mov eax, [ebp-48]
    mov ebx, eax
    mov eax, [ebp+8]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setne al
    movzx eax, al
    test eax, eax
    jz while_end131
    mov eax, [ebp-48]
    mov ebx, eax
    mov eax, [ebp+8]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, 124
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else133
    mov eax, 0
    push eax
    mov eax, [ebp-52]
    mov ebx, eax
    mov eax, [ebp-16]
    add eax, ebx
    pop ebx
    mov byte [eax], bl
    mov eax, [ebp-52]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-52], eax
    mov eax, [ebp-16]
    push eax
    mov eax, [ebp-56]
    mov ebx, eax
    pop eax
    add eax, ebx
    push eax
    call trim_start
    add esp, 4
    mov [ebp-60], eax
    mov eax, [ebp-60]
    push eax
    call trim_end
    add esp, 4
    mov eax, [ebp-60]
    push eax
    mov eax, [ebp-44]
    mov ebx, eax
    mov eax, [ebp-28]
    shl ebx, 2
    add eax, ebx
    pop ebx
    mov [eax], ebx
    mov eax, [ebp-44]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-44], eax
    mov eax, [ebp-48]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-48], eax
while_start134:
    mov eax, [ebp-48]
    mov ebx, eax
    mov eax, [ebp+8]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, 32
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz while_end135
    mov eax, [ebp-48]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-48], eax
    jmp while_start134
while_end135:
    mov eax, [ebp-52]
    mov [ebp-56], eax
    jmp endif132
else133:
    mov eax, [ebp-48]
    mov ebx, eax
    mov eax, [ebp+8]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, [ebp-52]
    mov ebx, eax
    mov eax, [ebp-16]
    add eax, ebx
    pop ebx
    mov byte [eax], bl
    mov eax, [ebp-52]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-52], eax
    mov eax, [ebp-48]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-48], eax
endif132:
    jmp while_start130
while_end131:
    mov eax, 0
    push eax
    mov eax, [ebp-52]
    mov ebx, eax
    mov eax, [ebp-16]
    add eax, ebx
    pop ebx
    mov byte [eax], bl
    mov eax, [ebp-16]
    push eax
    mov eax, [ebp-56]
    mov ebx, eax
    pop eax
    add eax, ebx
    push eax
    call trim_start
    add esp, 4
    mov [ebp-64], eax
    mov eax, [ebp-64]
    push eax
    call trim_end
    add esp, 4
    mov eax, [ebp-64]
    push eax
    mov eax, [ebp-44]
    mov ebx, eax
    mov eax, [ebp-28]
    shl ebx, 2
    add eax, ebx
    pop ebx
    mov [eax], ebx
    mov eax, [ebp-44]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-44], eax
    mov eax, [ebp-44]
    mov [ebp-68], eax
    mov eax, 0
    mov [ebp-72], eax
while_start136:
    mov eax, [ebp-72]
    push eax
    mov eax, [ebp-68]
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    test eax, eax
    jz while_end137
    mov eax, [ebp-72]
    push eax
    mov eax, 2
    mov ebx, eax
    pop eax
    imul eax, ebx
    mov ebx, eax
    mov eax, [ebp-20]
    shl ebx, 2
    add eax, ebx
    push eax
    mov eax, 42
    push eax
    call syscall1
    add esp, 8
    mov [ebp-76], eax
    mov eax, [ebp-76]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setne al
    movzx eax, al
    test eax, eax
    jz else139
    lea eax, [rel str_31]
    push eax
    call print_err
    add esp, 4
    jmp exec_pipeline_return
    jmp endif138
else139:
endif138:
    mov eax, [ebp-72]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-72], eax
    jmp while_start136
while_end137:
    mov eax, 0
    mov [ebp-72], eax
while_start140:
    mov eax, [ebp-72]
    push eax
    mov eax, [ebp-44]
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    test eax, eax
    jz while_end141
    mov eax, 0
    push eax
    mov eax, 2
    push eax
    call syscall1
    add esp, 8
    mov [ebp-80], eax
    mov eax, [ebp-80]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else143
    mov eax, [ebp-72]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setg al
    movzx eax, al
    test eax, eax
    jz else145
    mov eax, 0
    push eax
    mov eax, [ebp-72]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    sub eax, ebx
    push eax
    mov eax, 2
    mov ebx, eax
    pop eax
    imul eax, ebx
    mov ebx, eax
    mov eax, [ebp-20]
    shl ebx, 2
    add eax, ebx
    mov eax, [eax]
    push eax
    mov eax, 63
    push eax
    call syscall2
    add esp, 12
    jmp endif144
else145:
endif144:
    mov eax, 1
    push eax
    mov eax, [ebp-72]
    push eax
    mov eax, 2
    mov ebx, eax
    pop eax
    imul eax, ebx
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov ebx, eax
    mov eax, [ebp-20]
    shl ebx, 2
    add eax, ebx
    mov eax, [eax]
    push eax
    mov eax, 63
    push eax
    call syscall2
    add esp, 12
    mov eax, 0
    mov [ebp-84], eax
while_start146:
    mov eax, [ebp-84]
    push eax
    mov eax, [ebp-68]
    push eax
    mov eax, 2
    mov ebx, eax
    pop eax
    imul eax, ebx
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    test eax, eax
    jz while_end147
    mov eax, [ebp-84]
    mov ebx, eax
    mov eax, [ebp-20]
    shl ebx, 2
    add eax, ebx
    mov eax, [eax]
    push eax
    mov eax, 6
    push eax
    call syscall1
    add esp, 8
    mov eax, [ebp-84]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-84], eax
    jmp while_start146
while_end147:
    mov eax, [ebp-36]
    push eax
    mov eax, [ebp-72]
    push eax
    mov eax, 1024
    mov ebx, eax
    pop eax
    imul eax, ebx
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-88], eax
    mov eax, [ebp-32]
    push eax
    mov eax, [ebp-72]
    push eax
    mov eax, 64
    mov ebx, eax
    pop eax
    imul eax, ebx
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-92], eax
    mov eax, [ebp-92]
    push eax
    mov eax, [ebp-88]
    push eax
    mov eax, [ebp-72]
    mov ebx, eax
    mov eax, [ebp-28]
    shl ebx, 2
    add eax, ebx
    mov eax, [eax]
    push eax
    call parse_args
    add esp, 12
    mov [ebp-96], eax
    mov eax, [ebp-40]
    push eax
    mov eax, [ebp-72]
    push eax
    mov eax, 256
    mov ebx, eax
    pop eax
    imul eax, ebx
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-100], eax
    mov eax, 0
    mov ebx, eax
    mov eax, [ebp-92]
    shl ebx, 2
    add eax, ebx
    mov eax, [eax]
    mov [ebp-104], eax
    mov eax, [ebp-100]
    push eax
    mov eax, [ebp-104]
    push eax
    call resolve_path
    add esp, 8
    mov [ebp-108], eax
    mov eax, [ebp-108]
    push eax
    mov eax, 0
    mov ebx, eax
    mov eax, [ebp-92]
    shl ebx, 2
    add eax, ebx
    pop ebx
    mov [eax], ebx
    mov eax, 0
    push eax
    mov eax, [ebp-92]
    push eax
    mov eax, [ebp-108]
    push eax
    mov eax, 11
    push eax
    call syscall3
    add esp, 16
    lea eax, [rel str_32]
    push eax
    call print_err
    add esp, 4
    mov eax, [ebp-108]
    push eax
    call print_err
    add esp, 4
    lea eax, [rel str_33]
    push eax
    call print_err
    add esp, 4
    mov eax, 1
    push eax
    mov eax, 1
    push eax
    call syscall1
    add esp, 8
    jmp endif142
else143:
endif142:
    mov eax, [ebp-80]
    push eax
    mov eax, [ebp-72]
    mov ebx, eax
    mov eax, [ebp-24]
    shl ebx, 2
    add eax, ebx
    pop ebx
    mov [eax], ebx
    mov eax, [ebp-72]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-72], eax
    jmp while_start140
while_end141:
    mov eax, 0
    mov [ebp-72], eax
while_start148:
    mov eax, [ebp-72]
    push eax
    mov eax, [ebp-68]
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    test eax, eax
    jz while_end149
    mov eax, [ebp-72]
    push eax
    mov eax, 2
    mov ebx, eax
    pop eax
    imul eax, ebx
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov ebx, eax
    mov eax, [ebp-20]
    shl ebx, 2
    add eax, ebx
    mov eax, [eax]
    push eax
    mov eax, 6
    push eax
    call syscall1
    add esp, 8
    mov eax, [ebp-72]
    push eax
    mov eax, [ebp-68]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    sub eax, ebx
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    test eax, eax
    jz else151
    mov eax, [ebp-72]
    push eax
    mov eax, 2
    mov ebx, eax
    pop eax
    imul eax, ebx
    mov ebx, eax
    mov eax, [ebp-20]
    shl ebx, 2
    add eax, ebx
    mov eax, [eax]
    push eax
    mov eax, 6
    push eax
    call syscall1
    add esp, 8
    jmp endif150
else151:
endif150:
    mov eax, [ebp-72]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-72], eax
    jmp while_start148
while_end149:
    mov eax, [ebp-68]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    sub eax, ebx
    push eax
    mov eax, 2
    mov ebx, eax
    pop eax
    imul eax, ebx
    mov ebx, eax
    mov eax, [ebp-20]
    shl ebx, 2
    add eax, ebx
    mov eax, [eax]
    mov [ebp-112], eax
    mov eax, 4
    push eax
    mov eax, [ebp-12]
    push eax
    mov eax, [ebp-112]
    push eax
    mov eax, 3
    push eax
    call syscall3
    add esp, 16
    mov [ebp-116], eax
    mov eax, [ebp-116]
    push eax
    mov eax, 4
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else153
    mov eax, 0
    mov ebx, eax
    mov eax, [ebp-12]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, 80
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else155
    mov eax, 1
    mov ebx, eax
    mov eax, [ebp-12]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, 83
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else157
    mov eax, 2
    mov ebx, eax
    mov eax, [ebp-12]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, 67
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else159
    mov eax, 3
    mov ebx, eax
    mov eax, [ebp-12]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, 72
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else161
    mov eax, 8
    push eax
    mov eax, [ebp-12]
    push eax
    mov eax, 4
    mov ebx, eax
    pop eax
    add eax, ebx
    push eax
    mov eax, [ebp-112]
    push eax
    mov eax, 3
    push eax
    call syscall3
    add esp, 16
    mov [ebp-116], eax
    mov eax, [ebp-12]
    push eax
    call display_schema
    add esp, 4
    mov eax, [ebp-12]
    push eax
    mov eax, 6
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-120], eax
    mov eax, 0
    mov ebx, eax
    mov eax, [ebp-120]
    shl ebx, 1
    add eax, ebx
    movzx eax, word [eax]
    mov [ebp-124], eax
    mov eax, [ebp-12]
    push eax
    mov eax, 8
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-128], eax
    mov eax, 0
    mov ebx, eax
    mov eax, [ebp-128]
    shl ebx, 2
    add eax, ebx
    mov eax, [eax]
    mov [ebp-132], eax
    mov eax, [ebp-132]
    push eax
    mov eax, [ebp-124]
    mov ebx, eax
    pop eax
    imul eax, ebx
    mov [ebp-136], eax
    mov eax, [ebp-136]
    push eax
    mov eax, 8000
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setg al
    movzx eax, al
    test eax, eax
    jz else163
    mov eax, 8000
    mov [ebp-136], eax
    jmp endif162
else163:
endif162:
    mov eax, [ebp-136]
    push eax
    mov eax, [ebp-12]
    push eax
    mov eax, 12
    mov ebx, eax
    pop eax
    add eax, ebx
    push eax
    mov eax, [ebp-112]
    push eax
    mov eax, 3
    push eax
    call syscall3
    add esp, 16
    mov [ebp-116], eax
    mov eax, [ebp-124]
    push eax
    mov eax, [ebp-132]
    push eax
    mov eax, [ebp-12]
    push eax
    call display_records
    add esp, 12
    mov eax, [ebp-112]
    push eax
    mov eax, 6
    push eax
    call syscall1
    add esp, 8
    mov eax, 0
    mov [ebp-72], eax
while_start164:
    mov eax, [ebp-72]
    push eax
    mov eax, [ebp-44]
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    test eax, eax
    jz while_end165
    mov eax, 0
    mov [ebp-140], eax
    mov eax, 0
    push eax
    lea eax, [ebp-140]
    push eax
    mov eax, [ebp-72]
    mov ebx, eax
    mov eax, [ebp-24]
    shl ebx, 2
    add eax, ebx
    mov eax, [eax]
    push eax
    mov eax, 7
    push eax
    call syscall3
    add esp, 16
    mov eax, [ebp-72]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-72], eax
    jmp while_start164
while_end165:
    jmp exec_pipeline_return
    jmp endif160
else161:
endif160:
    jmp endif158
else159:
endif158:
    jmp endif156
else157:
endif156:
    jmp endif154
else155:
endif154:
    jmp endif152
else153:
endif152:
    mov eax, [ebp-116]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setg al
    movzx eax, al
    test eax, eax
    jz else167
    mov eax, [ebp-116]
    push eax
    mov eax, [ebp-12]
    push eax
    mov eax, 1
    push eax
    mov eax, 4
    push eax
    call syscall3
    add esp, 16
    jmp endif166
else167:
endif166:
    mov eax, 8000
    push eax
    mov eax, [ebp-12]
    push eax
    mov eax, [ebp-112]
    push eax
    mov eax, 3
    push eax
    call syscall3
    add esp, 16
    mov [ebp-116], eax
while_start168:
    mov eax, [ebp-116]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setg al
    movzx eax, al
    test eax, eax
    jz while_end169
    mov eax, [ebp-116]
    push eax
    mov eax, [ebp-12]
    push eax
    mov eax, 1
    push eax
    mov eax, 4
    push eax
    call syscall3
    add esp, 16
    mov eax, 8000
    push eax
    mov eax, [ebp-12]
    push eax
    mov eax, [ebp-112]
    push eax
    mov eax, 3
    push eax
    call syscall3
    add esp, 16
    mov [ebp-116], eax
    jmp while_start168
while_end169:
    mov eax, [ebp-112]
    push eax
    mov eax, 6
    push eax
    call syscall1
    add esp, 8
    mov eax, 0
    mov [ebp-72], eax
while_start170:
    mov eax, [ebp-72]
    push eax
    mov eax, [ebp-44]
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    test eax, eax
    jz while_end171
    mov eax, 0
    mov [ebp-144], eax
    mov eax, 0
    push eax
    lea eax, [ebp-144]
    push eax
    mov eax, [ebp-72]
    mov ebx, eax
    mov eax, [ebp-24]
    shl ebx, 2
    add eax, ebx
    mov eax, [eax]
    push eax
    mov eax, 7
    push eax
    call syscall3
    add esp, 16
    mov eax, [ebp-72]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-72], eax
    jmp while_start170
while_end171:
exec_pipeline_return:
    mov esp, ebp
    pop ebp
    ret
    
find_completions:
    push ebp
    mov ebp, esp
    sub esp, 56
    mov eax, 0
    mov [ebp-4], eax
    mov eax, 0
    mov [ebp-8], eax
    mov eax, 0
    push eax
    mov eax, 0
    mov ebx, eax
    mov eax, [ebp+20]
    add eax, ebx
    pop ebx
    mov byte [eax], bl
    mov eax, 0
    push eax
    mov eax, 0
    mov ebx, eax
    mov eax, [ebp+16]
    add eax, ebx
    pop ebx
    mov byte [eax], bl
    mov eax, 0
    push eax
    mov eax, 45
    push eax
    call syscall1
    add esp, 8
    mov [ebp-12], eax
    mov eax, [ebp-12]
    push eax
    mov eax, 8192
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-16], eax
    mov eax, [ebp-16]
    push eax
    mov eax, 45
    push eax
    call syscall1
    add esp, 8
    mov eax, [ebp-12]
    mov [ebp-20], eax
    lea eax, [rel str_34]
    mov [ebp-24], eax
    mov eax, 0
    push eax
    mov eax, 0
    push eax
    mov eax, 65536
    mov ebx, eax
    pop eax
    or eax, ebx
    push eax
    mov eax, [ebp-24]
    push eax
    mov eax, 5
    push eax
    call syscall3
    add esp, 16
    mov [ebp-28], eax
    mov eax, [ebp-28]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    test eax, eax
    jz else173
    mov eax, 0
    jmp find_completions_return
    jmp endif172
else173:
endif172:
    mov eax, 8192
    push eax
    mov eax, [ebp-20]
    push eax
    mov eax, [ebp-28]
    push eax
    mov eax, 220
    push eax
    call syscall3
    add esp, 16
    mov [ebp-32], eax
while_start174:
    mov eax, [ebp-32]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setg al
    movzx eax, al
    test eax, eax
    jz while_end175
    mov eax, 0
    mov [ebp-36], eax
while_start176:
    mov eax, [ebp-36]
    push eax
    mov eax, [ebp-32]
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    test eax, eax
    jz while_end177
    mov eax, [ebp-20]
    push eax
    mov eax, [ebp-36]
    mov ebx, eax
    pop eax
    add eax, ebx
    push eax
    mov eax, 16
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-40], eax
    mov eax, 0
    mov ebx, eax
    mov eax, [ebp-40]
    shl ebx, 1
    add eax, ebx
    movzx eax, word [eax]
    mov [ebp-44], eax
    mov eax, [ebp-20]
    push eax
    mov eax, [ebp-36]
    mov ebx, eax
    pop eax
    add eax, ebx
    push eax
    mov eax, 19
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-48], eax
    mov eax, 1
    mov [ebp-52], eax
    mov eax, 0
    mov [ebp-56], eax
while_start178:
    mov eax, [ebp-56]
    push eax
    mov eax, [ebp+12]
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    test eax, eax
    jz while_end179
    mov eax, [ebp-56]
    mov ebx, eax
    mov eax, [ebp-48]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, [ebp-56]
    mov ebx, eax
    mov eax, [ebp+8]
    add eax, ebx
    movzx eax, byte [eax]
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setne al
    movzx eax, al
    test eax, eax
    jz else181
    mov eax, 0
    mov [ebp-52], eax
    jmp while_end179
    jmp endif180
else181:
endif180:
    mov eax, [ebp-56]
    mov ebx, eax
    mov eax, [ebp-48]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else183
    mov eax, 0
    mov [ebp-52], eax
    jmp while_end179
    jmp endif182
else183:
endif182:
    mov eax, [ebp-56]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-56], eax
    jmp while_start178
while_end179:
    mov eax, [ebp-52]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setne al
    movzx eax, al
    test eax, eax
    jz else185
    mov eax, [ebp-4]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else187
    mov eax, 0
    mov [ebp-56], eax
while_start188:
    mov eax, [ebp-56]
    mov ebx, eax
    mov eax, [ebp-48]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setne al
    movzx eax, al
    test eax, eax
    jz while_end189
    mov eax, [ebp-56]
    mov ebx, eax
    mov eax, [ebp-48]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, [ebp-56]
    mov ebx, eax
    mov eax, [ebp+20]
    add eax, ebx
    pop ebx
    mov byte [eax], bl
    mov eax, [ebp-56]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-56], eax
    jmp while_start188
while_end189:
    mov eax, 0
    push eax
    mov eax, [ebp-56]
    mov ebx, eax
    mov eax, [ebp+20]
    add eax, ebx
    pop ebx
    mov byte [eax], bl
    jmp endif186
else187:
endif186:
    mov eax, [ebp-8]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setg al
    movzx eax, al
    test eax, eax
    jz else191
    mov eax, 32
    push eax
    mov eax, [ebp-8]
    mov ebx, eax
    mov eax, [ebp+16]
    add eax, ebx
    pop ebx
    mov byte [eax], bl
    mov eax, [ebp-8]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-8], eax
    jmp endif190
else191:
endif190:
    mov eax, 0
    mov [ebp-56], eax
while_start192:
    mov eax, [ebp-56]
    mov ebx, eax
    mov eax, [ebp-48]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setne al
    movzx eax, al
    test eax, eax
    jz while_end193
    mov eax, [ebp-56]
    mov ebx, eax
    mov eax, [ebp-48]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, [ebp-8]
    mov ebx, eax
    mov eax, [ebp+16]
    add eax, ebx
    pop ebx
    mov byte [eax], bl
    mov eax, [ebp-8]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-8], eax
    mov eax, [ebp-56]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-56], eax
    jmp while_start192
while_end193:
    mov eax, [ebp-4]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-4], eax
    jmp endif184
else185:
endif184:
    mov eax, [ebp-36]
    push eax
    mov eax, [ebp-44]
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-36], eax
    jmp while_start176
while_end177:
    mov eax, 8192
    push eax
    mov eax, [ebp-20]
    push eax
    mov eax, [ebp-28]
    push eax
    mov eax, 220
    push eax
    call syscall3
    add esp, 16
    mov [ebp-32], eax
    jmp while_start174
while_end175:
    mov eax, [ebp-28]
    push eax
    mov eax, 6
    push eax
    call syscall1
    add esp, 8
    mov eax, 0
    push eax
    mov eax, [ebp-8]
    mov ebx, eax
    mov eax, [ebp+16]
    add eax, ebx
    pop ebx
    mov byte [eax], bl
    mov eax, [ebp-4]
    jmp find_completions_return
find_completions_return:
    mov esp, ebp
    pop ebp
    ret
    
main:
    push ebp
    mov ebp, esp
    sub esp, 113
    lea eax, [rel str_35]
    push eax
    call print
    add esp, 4
    lea eax, [rel str_36]
    push eax
    call print
    add esp, 4
    lea eax, [rel str_37]
    push eax
    call print
    add esp, 4
    lea eax, [rel str_38]
    push eax
    call print
    add esp, 4
    lea eax, [rel str_39]
    push eax
    call print
    add esp, 4
    lea eax, [rel str_40]
    push eax
    call print
    add esp, 4
    lea eax, [rel str_41]
    push eax
    call print
    add esp, 4
    lea eax, [rel str_42]
    push eax
    call print
    add esp, 4
    lea eax, [rel str_43]
    push eax
    call print
    add esp, 4
    lea eax, [rel str_44]
    push eax
    call print
    add esp, 4
    lea eax, [rel str_45]
    push eax
    call print
    add esp, 4
    lea eax, [rel str_46]
    push eax
    call print
    add esp, 4
    mov eax, 0
    push eax
    mov eax, 45
    push eax
    call syscall1
    add esp, 8
    mov [ebp-4], eax
    mov eax, [ebp-4]
    push eax
    mov eax, 65536
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-8], eax
    mov eax, [ebp-8]
    push eax
    mov eax, 45
    push eax
    call syscall1
    add esp, 8
    mov eax, [ebp-4]
    mov [ebp-12], eax
    mov eax, [ebp-4]
    push eax
    mov eax, 1024
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [rel g_cwd_buf], eax
    mov eax, [ebp-4]
    push eax
    mov eax, 1536
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [rel g_prev_dir], eax
    mov eax, [ebp-4]
    push eax
    mov eax, 2048
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [rel g_home_dir], eax
    mov eax, [ebp-4]
    push eax
    mov eax, 2560
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [rel g_history], eax
    mov eax, [ebp-4]
    push eax
    mov eax, 2640
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [rel g_history_storage], eax
    mov eax, [ebp-4]
    push eax
    mov eax, 7760
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-16], eax
    mov eax, [ebp-4]
    push eax
    mov eax, 8272
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-20], eax
    mov eax, [ebp-4]
    push eax
    mov eax, 8528
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [rel g_orig_termios], eax
    mov eax, [ebp-4]
    push eax
    mov eax, 8592
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [rel g_raw_termios], eax
    call save_termios
    call set_raw_mode
    mov eax, [ebp-4]
    push eax
    mov eax, 8656
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-24], eax
    mov eax, [ebp-4]
    push eax
    mov eax, 8656
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-28], eax
    mov eax, 0
    push eax
    mov eax, 0
    mov ebx, eax
    lea eax, [rel g_prev_dir]
    add eax, ebx
    pop ebx
    mov byte [eax], bl
    lea eax, [rel str_47]
    push eax
    mov eax, [rel g_home_dir]
    push eax
    call strcpy
    add esp, 8
    mov eax, 0
    push eax
    mov eax, 0
    push eax
    lea eax, [rel str_48]
    push eax
    mov eax, 5
    push eax
    call syscall3
    add esp, 16
    mov [ebp-32], eax
    mov eax, [ebp-32]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setge al
    movzx eax, al
    test eax, eax
    jz else195
    mov eax, 0
    push eax
    mov eax, 45
    push eax
    call syscall1
    add esp, 8
    mov [ebp-36], eax
    mov eax, [ebp-36]
    push eax
    mov eax, 4096
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-40], eax
    mov eax, [ebp-40]
    push eax
    mov eax, 45
    push eax
    call syscall1
    add esp, 8
    mov eax, [ebp-36]
    mov [ebp-44], eax
    mov eax, 4000
    push eax
    mov eax, [ebp-44]
    push eax
    mov eax, [ebp-32]
    push eax
    mov eax, 3
    push eax
    call syscall3
    add esp, 16
    mov [ebp-48], eax
    mov eax, [ebp-32]
    push eax
    mov eax, 6
    push eax
    call syscall1
    add esp, 8
    mov eax, [ebp-48]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setg al
    movzx eax, al
    test eax, eax
    jz else197
    mov eax, 0
    mov [ebp-52], eax
while_start198:
    mov eax, [ebp-52]
    push eax
    mov eax, [ebp-48]
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    test eax, eax
    jz while_end199
    mov eax, [ebp-52]
    push eax
    mov eax, 5
    mov ebx, eax
    pop eax
    add eax, ebx
    push eax
    mov eax, [ebp-48]
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    test eax, eax
    jz else201
    mov eax, [ebp-52]
    mov ebx, eax
    mov eax, [ebp-44]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, 72
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else203
    mov eax, [ebp-52]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov ebx, eax
    mov eax, [ebp-44]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, 79
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else205
    mov eax, [ebp-52]
    push eax
    mov eax, 2
    mov ebx, eax
    pop eax
    add eax, ebx
    mov ebx, eax
    mov eax, [ebp-44]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, 77
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else207
    mov eax, [ebp-52]
    push eax
    mov eax, 3
    mov ebx, eax
    pop eax
    add eax, ebx
    mov ebx, eax
    mov eax, [ebp-44]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, 69
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else209
    mov eax, [ebp-52]
    push eax
    mov eax, 4
    mov ebx, eax
    pop eax
    add eax, ebx
    mov ebx, eax
    mov eax, [ebp-44]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, 61
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else211
    mov eax, 0
    mov [ebp-56], eax
    mov eax, [ebp-52]
    push eax
    mov eax, 5
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-60], eax
while_start212:
    mov eax, [ebp-60]
    push eax
    mov eax, [ebp-48]
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    test eax, eax
    jz while_end213
    mov eax, [ebp-60]
    mov ebx, eax
    mov eax, [ebp-44]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else215
    jmp while_end213
    jmp endif214
else215:
endif214:
    mov eax, [ebp-60]
    mov ebx, eax
    mov eax, [ebp-44]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, [ebp-56]
    mov ebx, eax
    lea eax, [rel g_home_dir]
    add eax, ebx
    pop ebx
    mov byte [eax], bl
    mov eax, [ebp-56]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-56], eax
    mov eax, [ebp-60]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-60], eax
    jmp while_start212
while_end213:
    mov eax, 0
    push eax
    mov eax, [ebp-56]
    mov ebx, eax
    lea eax, [rel g_home_dir]
    add eax, ebx
    pop ebx
    mov byte [eax], bl
    jmp endif210
else211:
endif210:
    jmp endif208
else209:
endif208:
    jmp endif206
else207:
endif206:
    jmp endif204
else205:
endif204:
    jmp endif202
else203:
endif202:
    jmp endif200
else201:
endif200:
while_start216:
    mov eax, [ebp-52]
    push eax
    mov eax, [ebp-48]
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    test eax, eax
    jz while_end217
    mov eax, [ebp-52]
    mov ebx, eax
    mov eax, [ebp-44]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else219
    mov eax, [ebp-52]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-52], eax
    jmp while_end217
    jmp endif218
else219:
endif218:
    mov eax, [ebp-52]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-52], eax
    jmp while_start216
while_end217:
    jmp while_start198
while_end199:
    jmp endif196
else197:
endif196:
    jmp endif194
else195:
endif194:
    mov eax, 1
    mov [ebp-64], eax
while_start220:
    mov eax, [ebp-64]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setne al
    movzx eax, al
    test eax, eax
    jz while_end221
    lea eax, [rel str_49]
    push eax
    call print
    add esp, 4
    mov eax, 0
    mov [ebp-68], eax
    mov eax, 0
    mov byte [ebp-69], al
    mov eax, [ebp-4]
    push eax
    mov eax, 9000
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-73], eax
    mov eax, [ebp-4]
    push eax
    mov eax, 13000
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-77], eax
while_start222:
    mov eax, [ebp-68]
    push eax
    mov eax, 1000
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    test eax, eax
    jz while_end223
    mov eax, 1
    push eax
    lea eax, [ebp-69]
    push eax
    mov eax, 0
    push eax
    mov eax, 3
    push eax
    call syscall3
    add esp, 16
    mov [ebp-81], eax
    mov eax, [ebp-81]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setle al
    movzx eax, al
    test eax, eax
    jz else225
    mov eax, [ebp-68]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else227
    mov eax, 0
    mov [ebp-64], eax
    jmp endif226
else227:
endif226:
    jmp while_end223
    jmp endif224
else225:
endif224:
    movzx eax, byte [ebp-69]
    push eax
    mov eax, 10
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else229
    jmp while_end223
    jmp endif228
else229:
endif228:
    movzx eax, byte [ebp-69]
    push eax
    mov eax, 13
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else231
    jmp while_end223
    jmp endif230
else231:
endif230:
    movzx eax, byte [ebp-69]
    push eax
    mov eax, 3
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else233
    lea eax, [rel str_50]
    push eax
    call print
    add esp, 4
    mov eax, 0
    mov [ebp-68], eax
    jmp while_end223
    jmp endif232
else233:
endif232:
    movzx eax, byte [ebp-69]
    push eax
    mov eax, 4
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else235
    mov eax, [ebp-68]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else237
    lea eax, [rel str_51]
    push eax
    call print
    add esp, 4
    mov eax, 0
    mov [ebp-64], eax
    jmp while_end223
    jmp endif236
else237:
endif236:
    jmp endif234
else235:
endif234:
    movzx eax, byte [ebp-69]
    push eax
    mov eax, 9
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else239
    mov eax, [ebp-68]
    mov [ebp-85], eax
while_start240:
    mov eax, [ebp-85]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setg al
    movzx eax, al
    test eax, eax
    jz while_end241
    mov eax, [ebp-85]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    sub eax, ebx
    mov ebx, eax
    mov eax, [ebp-12]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, 32
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else243
    jmp while_end241
    jmp endif242
else243:
endif242:
    mov eax, [ebp-85]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    sub eax, ebx
    mov [ebp-85], eax
    jmp while_start240
while_end241:
    mov eax, [ebp-68]
    push eax
    mov eax, [ebp-85]
    mov ebx, eax
    pop eax
    sub eax, ebx
    mov [ebp-89], eax
    mov eax, [ebp-89]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setg al
    movzx eax, al
    test eax, eax
    jz else245
    mov eax, [ebp-12]
    push eax
    mov eax, [ebp-85]
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-93], eax
    mov eax, [ebp-77]
    push eax
    mov eax, [ebp-73]
    push eax
    mov eax, [ebp-89]
    push eax
    mov eax, [ebp-93]
    push eax
    call find_completions
    add esp, 16
    mov [ebp-97], eax
    mov eax, [ebp-97]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else247
    mov eax, [ebp-77]
    push eax
    call strlen
    add esp, 4
    mov [ebp-101], eax
    mov eax, 0
    mov [ebp-105], eax
while_start248:
    mov eax, [ebp-105]
    push eax
    mov eax, [ebp-89]
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    test eax, eax
    jz while_end249
    mov eax, 3
    push eax
    lea eax, [rel str_52]
    push eax
    mov eax, 1
    push eax
    mov eax, 4
    push eax
    call syscall3
    add esp, 16
    mov eax, [ebp-105]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-105], eax
    jmp while_start248
while_end249:
    mov eax, 0
    mov [ebp-105], eax
while_start250:
    mov eax, [ebp-105]
    push eax
    mov eax, [ebp-101]
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    test eax, eax
    jz while_end251
    mov eax, [ebp-105]
    mov ebx, eax
    mov eax, [ebp-77]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, [ebp-85]
    push eax
    mov eax, [ebp-105]
    mov ebx, eax
    pop eax
    add eax, ebx
    mov ebx, eax
    mov eax, [ebp-12]
    add eax, ebx
    pop ebx
    mov byte [eax], bl
    mov eax, [ebp-105]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-105], eax
    jmp while_start250
while_end251:
    mov eax, [ebp-85]
    push eax
    mov eax, [ebp-101]
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-68], eax
    mov eax, [ebp-101]
    push eax
    mov eax, [ebp-77]
    push eax
    mov eax, 1
    push eax
    mov eax, 4
    push eax
    call syscall3
    add esp, 16
    mov eax, 32
    push eax
    mov eax, [ebp-68]
    mov ebx, eax
    mov eax, [ebp-12]
    add eax, ebx
    pop ebx
    mov byte [eax], bl
    mov eax, [ebp-68]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-68], eax
    mov eax, 1
    push eax
    lea eax, [rel str_53]
    push eax
    mov eax, 1
    push eax
    mov eax, 4
    push eax
    call syscall3
    add esp, 16
    jmp endif246
else247:
    mov eax, [ebp-97]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setg al
    movzx eax, al
    test eax, eax
    jz else253
    lea eax, [rel str_54]
    push eax
    call print
    add esp, 4
    mov eax, [ebp-73]
    push eax
    call print
    add esp, 4
    lea eax, [rel str_55]
    push eax
    call print
    add esp, 4
    mov eax, 0
    push eax
    mov eax, [ebp-68]
    mov ebx, eax
    mov eax, [ebp-12]
    add eax, ebx
    pop ebx
    mov byte [eax], bl
    mov eax, [ebp-12]
    push eax
    call print
    add esp, 4
    jmp endif252
else253:
endif252:
endif246:
    jmp endif244
else245:
endif244:
    mov eax, 0
    jmp endif238
else239:
    movzx eax, byte [ebp-69]
    push eax
    mov eax, 127
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else255
    mov eax, [ebp-68]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setg al
    movzx eax, al
    test eax, eax
    jz else257
    mov eax, [ebp-68]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    sub eax, ebx
    mov [ebp-68], eax
    mov eax, 3
    push eax
    lea eax, [rel str_56]
    push eax
    mov eax, 1
    push eax
    mov eax, 4
    push eax
    call syscall3
    add esp, 16
    jmp endif256
else257:
endif256:
    jmp endif254
else255:
    movzx eax, byte [ebp-69]
    push eax
    mov eax, [ebp-68]
    mov ebx, eax
    mov eax, [ebp-12]
    add eax, ebx
    pop ebx
    mov byte [eax], bl
    mov eax, [ebp-68]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-68], eax
    mov eax, 1
    push eax
    lea eax, [ebp-69]
    push eax
    mov eax, 1
    push eax
    mov eax, 4
    push eax
    call syscall3
    add esp, 16
endif254:
endif238:
    jmp while_start222
while_end223:
    mov eax, 0
    push eax
    mov eax, [ebp-68]
    mov ebx, eax
    mov eax, [ebp-12]
    add eax, ebx
    pop ebx
    mov byte [eax], bl
    lea eax, [rel str_57]
    push eax
    call print
    add esp, 4
    mov eax, [ebp-64]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setne al
    movzx eax, al
    test eax, eax
    jz else259
    mov eax, [ebp-68]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setg al
    movzx eax, al
    test eax, eax
    jz else261
    lea eax, [rel str_58]
    push eax
    mov eax, [ebp-12]
    push eax
    call strcmp
    add esp, 8
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else263
    mov eax, 0
    mov [ebp-64], eax
    jmp endif262
else263:
endif262:
    lea eax, [rel str_59]
    push eax
    mov eax, [ebp-12]
    push eax
    call strcmp
    add esp, 8
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else265
    mov eax, 0
    mov [ebp-64], eax
    jmp endif264
else265:
endif264:
    mov eax, [ebp-64]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setne al
    movzx eax, al
    test eax, eax
    jz else267
    mov eax, [ebp-12]
    push eax
    call add_to_history
    add esp, 4
    mov eax, [ebp-12]
    push eax
    call trim_start
    add esp, 4
    mov [ebp-109], eax
    mov eax, [ebp-109]
    push eax
    call trim_end
    add esp, 4
    mov eax, [ebp-20]
    push eax
    mov eax, [ebp-109]
    push eax
    call try_builtin_impl
    add esp, 8
    mov [ebp-113], eax
    mov eax, [ebp-113]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else269
    mov eax, [ebp-12]
    push eax
    call exec_pipeline
    add esp, 4
    jmp endif268
else269:
endif268:
    jmp endif266
else267:
endif266:
    jmp endif260
else261:
endif260:
    jmp endif258
else259:
endif258:
    jmp while_start220
while_end221:
    call restore_termios
    lea eax, [rel str_60]
    push eax
    call println
    add esp, 4
    mov eax, 0
    push eax
    mov eax, 1
    push eax
    call syscall1
    add esp, 8
main_return:
    mov esp, ebp
    pop ebp
    ret