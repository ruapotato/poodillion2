; Generated by Brainhair Compiler
bits 32

extern syscall1
extern syscall2
extern syscall3

section .data
str_0: db "BrainhairOS Window Manager", 10, "", 0
str_1: db "Left-click title bar to drag, click X to close", 10, "", 0
str_2: db "Right-click to create window, middle-click to quit", 10, "", 0
str_3: db "/dev/input/mice", 0
str_4: db "Error: Cannot open /dev/input/mice", 10, "", 0
str_5: db "/dev/fb0", 0
str_6: db "Error: Cannot open /dev/fb0", 10, "", 0
str_7: db "Error: Cannot get screen info", 10, "", 0
str_8: db "Window Manager exited", 10, "", 0

section .text
global _start
global get_argc
global get_argv

section .bss
_startup_esp: resd 1

section .text

_start:
    mov [_startup_esp], esp  ; Save initial stack pointer
    call main
    ; Exit with return code from main
    mov ebx, eax  ; Exit code
    mov eax, 1    ; sys_exit
    int 0x80

; get_argc() - returns argument count
get_argc:
    mov eax, [_startup_esp]
    mov eax, [eax]  ; argc is at [esp]
    ret

; get_argv(index) - returns pointer to argument string
get_argv:
    push ebp
    mov ebp, esp
    mov eax, [_startup_esp]
    mov ecx, [ebp+8]  ; index
    lea eax, [eax + 4 + ecx*4]  ; argv[index] = esp + 4 + index*4
    mov eax, [eax]
    pop ebp
    ret
    
print_str:
    push ebp
    mov ebp, esp
    sub esp, 4
    mov eax, 0
    mov [ebp-4], eax
while_start0:
    mov eax, [ebp-4]
    mov ebx, eax
    mov eax, [ebp+8]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setne al
    movzx eax, al
    test eax, eax
    jz while_end1
    mov eax, [ebp-4]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-4], eax
    jmp while_start0
while_end1:
    mov eax, [ebp-4]
    push eax
    mov eax, [ebp+8]
    push eax
    mov eax, 1
    push eax
    mov eax, 4
    push eax
    call syscall3
    add esp, 16
print_str_return:
    mov esp, ebp
    pop ebp
    ret
    
get_window_ptr:
    push ebp
    mov ebp, esp
    mov eax, [ebp+8]
    push eax
    mov eax, [ebp+12]
    push eax
    mov eax, 28
    mov ebx, eax
    pop eax
    imul eax, ebx
    mov ebx, eax
    pop eax
    add eax, ebx
    jmp get_window_ptr_return
get_window_ptr_return:
    mov esp, ebp
    pop ebp
    ret
    
window_get:
    push ebp
    mov ebp, esp
    mov eax, [ebp+12]
    mov ebx, eax
    mov eax, [ebp+8]
    shl ebx, 2
    add eax, ebx
    mov eax, [eax]
    jmp window_get_return
window_get_return:
    mov esp, ebp
    pop ebp
    ret
    
window_set:
    push ebp
    mov ebp, esp
    mov eax, [ebp+16]
    push eax
    mov eax, [ebp+12]
    mov ebx, eax
    mov eax, [ebp+8]
    shl ebx, 2
    add eax, ebx
    pop ebx
    mov [eax], ebx
window_set_return:
    mov esp, ebp
    pop ebp
    ret
    
fill_rect:
    push ebp
    mov ebp, esp
    sub esp, 24
    mov eax, [ebp+16]
    mov [ebp-4], eax
while_start2:
    mov eax, [ebp-4]
    push eax
    mov eax, [ebp+16]
    push eax
    mov eax, [ebp+24]
    mov ebx, eax
    pop eax
    add eax, ebx
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    test eax, eax
    jz while_end3
    mov eax, [ebp-4]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setge al
    movzx eax, al
    push eax
    mov eax, [ebp-4]
    push eax
    mov eax, [ebp+36]
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    mov ebx, eax
    pop eax
    test eax, eax
    jz and_short6
    test ebx, ebx
    jz and_short6
    mov eax, 1
    jmp and_end7
and_short6:
    xor eax, eax
and_end7:
    test eax, eax
    jz else5
    mov eax, [ebp+12]
    mov [ebp-8], eax
    mov eax, [ebp+12]
    push eax
    mov eax, [ebp+20]
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-12], eax
    mov eax, [ebp-8]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    test eax, eax
    jz else9
    mov eax, 0
    mov [ebp-8], eax
    jmp endif8
else9:
endif8:
    mov eax, [ebp-12]
    push eax
    mov eax, [ebp+32]
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setg al
    movzx eax, al
    test eax, eax
    jz else11
    mov eax, [ebp+32]
    mov [ebp-12], eax
    jmp endif10
else11:
endif10:
    mov eax, [ebp-8]
    push eax
    mov eax, [ebp-12]
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    test eax, eax
    jz else13
    mov eax, [ebp-12]
    push eax
    mov eax, [ebp-8]
    mov ebx, eax
    pop eax
    sub eax, ebx
    mov [ebp-16], eax
    mov eax, 0
    mov [ebp-20], eax
while_start14:
    mov eax, [ebp-20]
    push eax
    mov eax, [ebp-16]
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    test eax, eax
    jz while_end15
    mov eax, [ebp+28]
    push eax
    mov eax, [ebp-20]
    mov ebx, eax
    mov eax, [ebp+40]
    shl ebx, 2
    add eax, ebx
    pop ebx
    mov [eax], ebx
    mov eax, [ebp-20]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-20], eax
    jmp while_start14
while_end15:
    mov eax, [ebp-4]
    push eax
    mov eax, [ebp+32]
    mov ebx, eax
    pop eax
    imul eax, ebx
    push eax
    mov eax, [ebp-8]
    mov ebx, eax
    pop eax
    add eax, ebx
    push eax
    mov eax, 4
    mov ebx, eax
    pop eax
    imul eax, ebx
    mov [ebp-24], eax
    mov eax, 0
    push eax
    mov eax, [ebp-24]
    push eax
    mov eax, [ebp+8]
    push eax
    mov eax, 19
    push eax
    call syscall3
    add esp, 16
    mov eax, [ebp-16]
    push eax
    mov eax, 4
    mov ebx, eax
    pop eax
    imul eax, ebx
    push eax
    mov eax, [ebp+40]
    push eax
    mov eax, [ebp+8]
    push eax
    mov eax, 4
    push eax
    call syscall3
    add esp, 16
    jmp endif12
else13:
endif12:
    jmp endif4
else5:
endif4:
    mov eax, [ebp-4]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-4], eax
    jmp while_start2
while_end3:
fill_rect_return:
    mov esp, ebp
    pop ebp
    ret
    
draw_pixel:
    push ebp
    mov ebp, esp
    sub esp, 4
    mov eax, [ebp+12]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setge al
    movzx eax, al
    push eax
    mov eax, [ebp+12]
    push eax
    mov eax, [ebp+24]
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    mov ebx, eax
    pop eax
    test eax, eax
    jz and_short18
    test ebx, ebx
    jz and_short18
    mov eax, 1
    jmp and_end19
and_short18:
    xor eax, eax
and_end19:
    push eax
    mov eax, [ebp+16]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setge al
    movzx eax, al
    mov ebx, eax
    pop eax
    test eax, eax
    jz and_short20
    test ebx, ebx
    jz and_short20
    mov eax, 1
    jmp and_end21
and_short20:
    xor eax, eax
and_end21:
    push eax
    mov eax, [ebp+16]
    push eax
    mov eax, [ebp+28]
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    mov ebx, eax
    pop eax
    test eax, eax
    jz and_short22
    test ebx, ebx
    jz and_short22
    mov eax, 1
    jmp and_end23
and_short22:
    xor eax, eax
and_end23:
    test eax, eax
    jz else17
    mov eax, [ebp+20]
    push eax
    mov eax, 0
    mov ebx, eax
    mov eax, [ebp+32]
    shl ebx, 2
    add eax, ebx
    pop ebx
    mov [eax], ebx
    mov eax, [ebp+16]
    push eax
    mov eax, [ebp+24]
    mov ebx, eax
    pop eax
    imul eax, ebx
    push eax
    mov eax, [ebp+12]
    mov ebx, eax
    pop eax
    add eax, ebx
    push eax
    mov eax, 4
    mov ebx, eax
    pop eax
    imul eax, ebx
    mov [ebp-4], eax
    mov eax, 0
    push eax
    mov eax, [ebp-4]
    push eax
    mov eax, [ebp+8]
    push eax
    mov eax, 19
    push eax
    call syscall3
    add esp, 16
    mov eax, 4
    push eax
    mov eax, [ebp+32]
    push eax
    mov eax, [ebp+8]
    push eax
    mov eax, 4
    push eax
    call syscall3
    add esp, 16
    jmp endif16
else17:
endif16:
draw_pixel_return:
    mov esp, ebp
    pop ebp
    ret
    
draw_window:
    push ebp
    mov ebp, esp
    sub esp, 28
    mov eax, 0
    push eax
    mov eax, [ebp+12]
    push eax
    call window_get
    add esp, 8
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else25
    jmp draw_window_return
    jmp endif24
else25:
endif24:
    mov eax, 1
    push eax
    mov eax, [ebp+12]
    push eax
    call window_get
    add esp, 8
    mov [ebp-4], eax
    mov eax, 2
    push eax
    mov eax, [ebp+12]
    push eax
    call window_get
    add esp, 8
    mov [ebp-8], eax
    mov eax, 3
    push eax
    mov eax, [ebp+12]
    push eax
    call window_get
    add esp, 8
    mov [ebp-12], eax
    mov eax, 4
    push eax
    mov eax, [ebp+12]
    push eax
    call window_get
    add esp, 8
    mov [ebp-16], eax
    mov eax, 5
    push eax
    mov eax, [ebp+12]
    push eax
    call window_get
    add esp, 8
    mov [ebp-20], eax
    mov eax, 6
    push eax
    mov eax, [ebp+12]
    push eax
    call window_get
    add esp, 8
    mov [ebp-24], eax
    mov eax, 4210752
    mov [ebp-28], eax
    mov eax, [ebp+16]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setne al
    movzx eax, al
    test eax, eax
    jz else27
    mov eax, 33023
    mov [ebp-28], eax
    jmp endif26
else27:
endif26:
    mov eax, [ebp+28]
    push eax
    mov eax, [ebp+24]
    push eax
    mov eax, [ebp+20]
    push eax
    mov eax, [ebp-28]
    push eax
    mov eax, 2
    push eax
    mov eax, [ebp-12]
    push eax
    mov eax, [ebp-8]
    push eax
    mov eax, [ebp-4]
    push eax
    mov eax, [ebp+8]
    push eax
    call fill_rect
    add esp, 36
    mov eax, [ebp+28]
    push eax
    mov eax, [ebp+24]
    push eax
    mov eax, [ebp+20]
    push eax
    mov eax, [ebp-28]
    push eax
    mov eax, 2
    push eax
    mov eax, [ebp-12]
    push eax
    mov eax, [ebp-8]
    push eax
    mov eax, [ebp-16]
    mov ebx, eax
    pop eax
    add eax, ebx
    push eax
    mov eax, 2
    mov ebx, eax
    pop eax
    sub eax, ebx
    push eax
    mov eax, [ebp-4]
    push eax
    mov eax, [ebp+8]
    push eax
    call fill_rect
    add esp, 36
    mov eax, [ebp+28]
    push eax
    mov eax, [ebp+24]
    push eax
    mov eax, [ebp+20]
    push eax
    mov eax, [ebp-28]
    push eax
    mov eax, [ebp-16]
    push eax
    mov eax, 2
    push eax
    mov eax, [ebp-8]
    push eax
    mov eax, [ebp-4]
    push eax
    mov eax, [ebp+8]
    push eax
    call fill_rect
    add esp, 36
    mov eax, [ebp+28]
    push eax
    mov eax, [ebp+24]
    push eax
    mov eax, [ebp+20]
    push eax
    mov eax, [ebp-28]
    push eax
    mov eax, [ebp-16]
    push eax
    mov eax, 2
    push eax
    mov eax, [ebp-8]
    push eax
    mov eax, [ebp-4]
    push eax
    mov eax, [ebp-12]
    mov ebx, eax
    pop eax
    add eax, ebx
    push eax
    mov eax, 2
    mov ebx, eax
    pop eax
    sub eax, ebx
    push eax
    mov eax, [ebp+8]
    push eax
    call fill_rect
    add esp, 36
    mov eax, [ebp+28]
    push eax
    mov eax, [ebp+24]
    push eax
    mov eax, [ebp+20]
    push eax
    mov eax, [ebp-20]
    push eax
    mov eax, 20
    push eax
    mov eax, [ebp-12]
    push eax
    mov eax, 2
    push eax
    mov eax, 2
    mov ebx, eax
    pop eax
    imul eax, ebx
    mov ebx, eax
    pop eax
    sub eax, ebx
    push eax
    mov eax, [ebp-8]
    push eax
    mov eax, 2
    mov ebx, eax
    pop eax
    add eax, ebx
    push eax
    mov eax, [ebp-4]
    push eax
    mov eax, 2
    mov ebx, eax
    pop eax
    add eax, ebx
    push eax
    mov eax, [ebp+8]
    push eax
    call fill_rect
    add esp, 36
    mov eax, [ebp+28]
    push eax
    mov eax, [ebp+24]
    push eax
    mov eax, [ebp+20]
    push eax
    mov eax, 16711680
    push eax
    mov eax, 16
    push eax
    mov eax, 14
    push eax
    mov eax, [ebp-8]
    push eax
    mov eax, 2
    mov ebx, eax
    pop eax
    add eax, ebx
    push eax
    mov eax, 2
    mov ebx, eax
    pop eax
    add eax, ebx
    push eax
    mov eax, [ebp-4]
    push eax
    mov eax, [ebp-12]
    mov ebx, eax
    pop eax
    add eax, ebx
    push eax
    mov eax, 2
    mov ebx, eax
    pop eax
    sub eax, ebx
    push eax
    mov eax, 16
    mov ebx, eax
    pop eax
    sub eax, ebx
    push eax
    mov eax, [ebp+8]
    push eax
    call fill_rect
    add esp, 36
    mov eax, [ebp+28]
    push eax
    mov eax, [ebp+24]
    push eax
    mov eax, [ebp+20]
    push eax
    mov eax, [ebp-24]
    push eax
    mov eax, [ebp-16]
    push eax
    mov eax, 2
    push eax
    mov eax, 2
    mov ebx, eax
    pop eax
    imul eax, ebx
    mov ebx, eax
    pop eax
    sub eax, ebx
    push eax
    mov eax, 20
    mov ebx, eax
    pop eax
    sub eax, ebx
    push eax
    mov eax, [ebp-12]
    push eax
    mov eax, 2
    push eax
    mov eax, 2
    mov ebx, eax
    pop eax
    imul eax, ebx
    mov ebx, eax
    pop eax
    sub eax, ebx
    push eax
    mov eax, [ebp-8]
    push eax
    mov eax, 2
    mov ebx, eax
    pop eax
    add eax, ebx
    push eax
    mov eax, 20
    mov ebx, eax
    pop eax
    add eax, ebx
    push eax
    mov eax, [ebp-4]
    push eax
    mov eax, 2
    mov ebx, eax
    pop eax
    add eax, ebx
    push eax
    mov eax, [ebp+8]
    push eax
    call fill_rect
    add esp, 36
draw_window_return:
    mov esp, ebp
    pop ebp
    ret
    
draw_cursor:
    push ebp
    mov ebp, esp
    sub esp, 8
    mov eax, 0
    mov [ebp-4], eax
while_start28:
    mov eax, [ebp-4]
    push eax
    mov eax, 12
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    test eax, eax
    jz while_end29
    mov eax, [ebp+28]
    push eax
    mov eax, [ebp+24]
    push eax
    mov eax, [ebp+20]
    push eax
    mov eax, 16777215
    push eax
    mov eax, [ebp+16]
    push eax
    mov eax, [ebp-4]
    mov ebx, eax
    pop eax
    add eax, ebx
    push eax
    mov eax, [ebp+12]
    push eax
    mov eax, [ebp+8]
    push eax
    call draw_pixel
    add esp, 28
    mov eax, [ebp-4]
    push eax
    mov eax, 8
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    test eax, eax
    jz else31
    mov eax, [ebp+28]
    push eax
    mov eax, [ebp+24]
    push eax
    mov eax, [ebp+20]
    push eax
    mov eax, 16777215
    push eax
    mov eax, [ebp+16]
    push eax
    mov eax, [ebp-4]
    mov ebx, eax
    pop eax
    add eax, ebx
    push eax
    mov eax, [ebp+12]
    push eax
    mov eax, [ebp-4]
    mov ebx, eax
    pop eax
    add eax, ebx
    push eax
    mov eax, [ebp+8]
    push eax
    call draw_pixel
    add esp, 28
    jmp endif30
else31:
endif30:
    mov eax, 1
    mov [ebp-8], eax
while_start32:
    mov eax, [ebp-8]
    push eax
    mov eax, [ebp-4]
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    push eax
    mov eax, [ebp-8]
    push eax
    mov eax, 7
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    mov ebx, eax
    pop eax
    test eax, eax
    jz and_short34
    test ebx, ebx
    jz and_short34
    mov eax, 1
    jmp and_end35
and_short34:
    xor eax, eax
and_end35:
    test eax, eax
    jz while_end33
    mov eax, [ebp+28]
    push eax
    mov eax, [ebp+24]
    push eax
    mov eax, [ebp+20]
    push eax
    mov eax, 0
    push eax
    mov eax, [ebp+16]
    push eax
    mov eax, [ebp-4]
    mov ebx, eax
    pop eax
    add eax, ebx
    push eax
    mov eax, [ebp+12]
    push eax
    mov eax, [ebp-8]
    mov ebx, eax
    pop eax
    add eax, ebx
    push eax
    mov eax, [ebp+8]
    push eax
    call draw_pixel
    add esp, 28
    mov eax, [ebp-8]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-8], eax
    jmp while_start32
while_end33:
    mov eax, [ebp-4]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-4], eax
    jmp while_start28
while_end29:
draw_cursor_return:
    mov esp, ebp
    pop ebp
    ret
    
point_in_titlebar:
    push ebp
    mov ebp, esp
    sub esp, 12
    mov eax, 0
    push eax
    mov eax, [ebp+8]
    push eax
    call window_get
    add esp, 8
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else37
    mov eax, 0
    jmp point_in_titlebar_return
    jmp endif36
else37:
endif36:
    mov eax, 1
    push eax
    mov eax, [ebp+8]
    push eax
    call window_get
    add esp, 8
    mov [ebp-4], eax
    mov eax, 2
    push eax
    mov eax, [ebp+8]
    push eax
    call window_get
    add esp, 8
    mov [ebp-8], eax
    mov eax, 3
    push eax
    mov eax, [ebp+8]
    push eax
    call window_get
    add esp, 8
    mov [ebp-12], eax
    mov eax, [ebp+12]
    push eax
    mov eax, [ebp-4]
    push eax
    mov eax, 2
    mov ebx, eax
    pop eax
    add eax, ebx
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setge al
    movzx eax, al
    push eax
    mov eax, [ebp+12]
    push eax
    mov eax, [ebp-4]
    push eax
    mov eax, [ebp-12]
    mov ebx, eax
    pop eax
    add eax, ebx
    push eax
    mov eax, 2
    mov ebx, eax
    pop eax
    sub eax, ebx
    push eax
    mov eax, 16
    mov ebx, eax
    pop eax
    sub eax, ebx
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    mov ebx, eax
    pop eax
    test eax, eax
    jz and_short40
    test ebx, ebx
    jz and_short40
    mov eax, 1
    jmp and_end41
and_short40:
    xor eax, eax
and_end41:
    test eax, eax
    jz else39
    mov eax, [ebp+16]
    push eax
    mov eax, [ebp-8]
    push eax
    mov eax, 2
    mov ebx, eax
    pop eax
    add eax, ebx
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setge al
    movzx eax, al
    push eax
    mov eax, [ebp+16]
    push eax
    mov eax, [ebp-8]
    push eax
    mov eax, 2
    mov ebx, eax
    pop eax
    add eax, ebx
    push eax
    mov eax, 20
    mov ebx, eax
    pop eax
    add eax, ebx
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    mov ebx, eax
    pop eax
    test eax, eax
    jz and_short44
    test ebx, ebx
    jz and_short44
    mov eax, 1
    jmp and_end45
and_short44:
    xor eax, eax
and_end45:
    test eax, eax
    jz else43
    mov eax, 1
    jmp point_in_titlebar_return
    jmp endif42
else43:
endif42:
    jmp endif38
else39:
endif38:
    mov eax, 0
    jmp point_in_titlebar_return
point_in_titlebar_return:
    mov esp, ebp
    pop ebp
    ret
    
point_on_close:
    push ebp
    mov ebp, esp
    sub esp, 12
    mov eax, 0
    push eax
    mov eax, [ebp+8]
    push eax
    call window_get
    add esp, 8
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else47
    mov eax, 0
    jmp point_on_close_return
    jmp endif46
else47:
endif46:
    mov eax, 1
    push eax
    mov eax, [ebp+8]
    push eax
    call window_get
    add esp, 8
    mov [ebp-4], eax
    mov eax, 2
    push eax
    mov eax, [ebp+8]
    push eax
    call window_get
    add esp, 8
    mov [ebp-8], eax
    mov eax, 3
    push eax
    mov eax, [ebp+8]
    push eax
    call window_get
    add esp, 8
    mov [ebp-12], eax
    mov eax, [ebp+12]
    push eax
    mov eax, [ebp-4]
    push eax
    mov eax, [ebp-12]
    mov ebx, eax
    pop eax
    add eax, ebx
    push eax
    mov eax, 2
    mov ebx, eax
    pop eax
    sub eax, ebx
    push eax
    mov eax, 16
    mov ebx, eax
    pop eax
    sub eax, ebx
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setge al
    movzx eax, al
    push eax
    mov eax, [ebp+12]
    push eax
    mov eax, [ebp-4]
    push eax
    mov eax, [ebp-12]
    mov ebx, eax
    pop eax
    add eax, ebx
    push eax
    mov eax, 2
    mov ebx, eax
    pop eax
    sub eax, ebx
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    mov ebx, eax
    pop eax
    test eax, eax
    jz and_short50
    test ebx, ebx
    jz and_short50
    mov eax, 1
    jmp and_end51
and_short50:
    xor eax, eax
and_end51:
    test eax, eax
    jz else49
    mov eax, [ebp+16]
    push eax
    mov eax, [ebp-8]
    push eax
    mov eax, 2
    mov ebx, eax
    pop eax
    add eax, ebx
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setge al
    movzx eax, al
    push eax
    mov eax, [ebp+16]
    push eax
    mov eax, [ebp-8]
    push eax
    mov eax, 2
    mov ebx, eax
    pop eax
    add eax, ebx
    push eax
    mov eax, 18
    mov ebx, eax
    pop eax
    add eax, ebx
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    mov ebx, eax
    pop eax
    test eax, eax
    jz and_short54
    test ebx, ebx
    jz and_short54
    mov eax, 1
    jmp and_end55
and_short54:
    xor eax, eax
and_end55:
    test eax, eax
    jz else53
    mov eax, 1
    jmp point_on_close_return
    jmp endif52
else53:
endif52:
    jmp endif48
else49:
endif48:
    mov eax, 0
    jmp point_on_close_return
point_on_close_return:
    mov esp, ebp
    pop ebp
    ret
    
point_in_window:
    push ebp
    mov ebp, esp
    sub esp, 16
    mov eax, 0
    push eax
    mov eax, [ebp+8]
    push eax
    call window_get
    add esp, 8
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else57
    mov eax, 0
    jmp point_in_window_return
    jmp endif56
else57:
endif56:
    mov eax, 1
    push eax
    mov eax, [ebp+8]
    push eax
    call window_get
    add esp, 8
    mov [ebp-4], eax
    mov eax, 2
    push eax
    mov eax, [ebp+8]
    push eax
    call window_get
    add esp, 8
    mov [ebp-8], eax
    mov eax, 3
    push eax
    mov eax, [ebp+8]
    push eax
    call window_get
    add esp, 8
    mov [ebp-12], eax
    mov eax, 4
    push eax
    mov eax, [ebp+8]
    push eax
    call window_get
    add esp, 8
    mov [ebp-16], eax
    mov eax, [ebp+12]
    push eax
    mov eax, [ebp-4]
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setge al
    movzx eax, al
    push eax
    mov eax, [ebp+12]
    push eax
    mov eax, [ebp-4]
    push eax
    mov eax, [ebp-12]
    mov ebx, eax
    pop eax
    add eax, ebx
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    mov ebx, eax
    pop eax
    test eax, eax
    jz and_short60
    test ebx, ebx
    jz and_short60
    mov eax, 1
    jmp and_end61
and_short60:
    xor eax, eax
and_end61:
    push eax
    mov eax, [ebp+16]
    push eax
    mov eax, [ebp-8]
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setge al
    movzx eax, al
    mov ebx, eax
    pop eax
    test eax, eax
    jz and_short62
    test ebx, ebx
    jz and_short62
    mov eax, 1
    jmp and_end63
and_short62:
    xor eax, eax
and_end63:
    push eax
    mov eax, [ebp+16]
    push eax
    mov eax, [ebp-8]
    push eax
    mov eax, [ebp-16]
    mov ebx, eax
    pop eax
    add eax, ebx
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    mov ebx, eax
    pop eax
    test eax, eax
    jz and_short64
    test ebx, ebx
    jz and_short64
    mov eax, 1
    jmp and_end65
and_short64:
    xor eax, eax
and_end65:
    test eax, eax
    jz else59
    mov eax, 1
    jmp point_in_window_return
    jmp endif58
else59:
endif58:
    mov eax, 0
    jmp point_in_window_return
point_in_window_return:
    mov esp, ebp
    pop ebp
    ret
    
main:
    push ebp
    mov ebp, esp
    sub esp, 156
    lea eax, [rel str_0]
    push eax
    call print_str
    add esp, 4
    lea eax, [rel str_1]
    push eax
    call print_str
    add esp, 4
    lea eax, [rel str_2]
    push eax
    call print_str
    add esp, 4
    mov eax, 0
    push eax
    lea eax, [rel str_3]
    push eax
    mov eax, 5
    push eax
    call syscall2
    add esp, 12
    mov [ebp-4], eax
    mov eax, [ebp-4]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    test eax, eax
    jz else67
    lea eax, [rel str_4]
    push eax
    call print_str
    add esp, 4
    mov eax, 1
    push eax
    mov eax, 1
    push eax
    call syscall1
    add esp, 8
    jmp endif66
else67:
endif66:
    mov eax, 3
    push eax
    mov eax, [ebp-4]
    push eax
    mov eax, 55
    push eax
    call syscall2
    add esp, 12
    mov [ebp-8], eax
    mov eax, [ebp-8]
    push eax
    mov eax, 2048
    mov ebx, eax
    pop eax
    or eax, ebx
    push eax
    mov eax, 4
    push eax
    mov eax, [ebp-4]
    push eax
    mov eax, 55
    push eax
    call syscall3
    add esp, 16
    mov eax, 2
    push eax
    lea eax, [rel str_5]
    push eax
    mov eax, 5
    push eax
    call syscall2
    add esp, 12
    mov [ebp-12], eax
    mov eax, [ebp-12]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    test eax, eax
    jz else69
    lea eax, [rel str_6]
    push eax
    call print_str
    add esp, 4
    mov eax, [ebp-4]
    push eax
    mov eax, 6
    push eax
    call syscall1
    add esp, 8
    mov eax, 1
    push eax
    mov eax, 1
    push eax
    call syscall1
    add esp, 8
    jmp endif68
else69:
endif68:
    mov eax, 0
    push eax
    mov eax, 45
    push eax
    call syscall1
    add esp, 8
    mov [ebp-16], eax
    mov eax, [ebp-16]
    push eax
    mov eax, 32768
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-20], eax
    mov eax, [ebp-20]
    push eax
    mov eax, 45
    push eax
    call syscall1
    add esp, 8
    mov eax, [ebp-16]
    mov [ebp-24], eax
    mov eax, [ebp-16]
    push eax
    mov eax, 256
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-28], eax
    mov eax, [ebp-16]
    push eax
    mov eax, 8192
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-32], eax
    mov eax, [ebp-16]
    push eax
    mov eax, 8200
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-36], eax
    mov eax, [ebp-16]
    push eax
    mov eax, 8256
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-40], eax
    mov eax, [ebp-24]
    push eax
    mov eax, 17920
    push eax
    mov eax, [ebp-12]
    push eax
    mov eax, 54
    push eax
    call syscall3
    add esp, 16
    mov [ebp-44], eax
    mov eax, [ebp-44]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    test eax, eax
    jz else71
    lea eax, [rel str_7]
    push eax
    call print_str
    add esp, 4
    mov eax, 1
    push eax
    mov eax, 1
    push eax
    call syscall1
    add esp, 8
    jmp endif70
else71:
endif70:
    mov eax, 0
    mov ebx, eax
    mov eax, [ebp-24]
    shl ebx, 2
    add eax, ebx
    mov eax, [eax]
    mov [ebp-48], eax
    mov eax, 1
    mov ebx, eax
    mov eax, [ebp-24]
    shl ebx, 2
    add eax, ebx
    mov eax, [eax]
    mov [ebp-52], eax
    mov eax, 0
    mov [ebp-56], eax
while_start72:
    mov eax, [ebp-56]
    push eax
    mov eax, 8
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    test eax, eax
    jz while_end73
    mov eax, [ebp-56]
    push eax
    mov eax, [ebp-40]
    push eax
    call get_window_ptr
    add esp, 8
    mov [ebp-60], eax
    mov eax, 0
    push eax
    mov eax, 0
    push eax
    mov eax, [ebp-60]
    push eax
    call window_set
    add esp, 12
    mov eax, [ebp-56]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-56], eax
    jmp while_start72
while_end73:
    mov eax, 0
    push eax
    mov eax, [ebp-40]
    push eax
    call get_window_ptr
    add esp, 8
    mov [ebp-64], eax
    mov eax, 1
    push eax
    mov eax, 0
    push eax
    mov eax, [ebp-64]
    push eax
    call window_set
    add esp, 12
    mov eax, 100
    push eax
    mov eax, 1
    push eax
    mov eax, [ebp-64]
    push eax
    call window_set
    add esp, 12
    mov eax, 100
    push eax
    mov eax, 2
    push eax
    mov eax, [ebp-64]
    push eax
    call window_set
    add esp, 12
    mov eax, 300
    push eax
    mov eax, 3
    push eax
    mov eax, [ebp-64]
    push eax
    call window_set
    add esp, 12
    mov eax, 200
    push eax
    mov eax, 4
    push eax
    mov eax, [ebp-64]
    push eax
    call window_set
    add esp, 12
    mov eax, 16512
    push eax
    mov eax, 5
    push eax
    mov eax, [ebp-64]
    push eax
    call window_set
    add esp, 12
    mov eax, 12632256
    push eax
    mov eax, 6
    push eax
    mov eax, [ebp-64]
    push eax
    call window_set
    add esp, 12
    mov eax, 1
    push eax
    mov eax, [ebp-40]
    push eax
    call get_window_ptr
    add esp, 8
    mov [ebp-68], eax
    mov eax, 1
    push eax
    mov eax, 0
    push eax
    mov eax, [ebp-68]
    push eax
    call window_set
    add esp, 12
    mov eax, 250
    push eax
    mov eax, 1
    push eax
    mov eax, [ebp-68]
    push eax
    call window_set
    add esp, 12
    mov eax, 150
    push eax
    mov eax, 2
    push eax
    mov eax, [ebp-68]
    push eax
    call window_set
    add esp, 12
    mov eax, 350
    push eax
    mov eax, 3
    push eax
    mov eax, [ebp-68]
    push eax
    call window_set
    add esp, 12
    mov eax, 250
    push eax
    mov eax, 4
    push eax
    mov eax, [ebp-68]
    push eax
    call window_set
    add esp, 12
    mov eax, 4227072
    push eax
    mov eax, 5
    push eax
    mov eax, [ebp-68]
    push eax
    call window_set
    add esp, 12
    mov eax, 14737632
    push eax
    mov eax, 6
    push eax
    mov eax, [ebp-68]
    push eax
    call window_set
    add esp, 12
    mov eax, [ebp-48]
    push eax
    mov eax, 2
    mov ebx, eax
    pop eax
    xor edx, edx
    idiv ebx
    mov [ebp-72], eax
    mov eax, [ebp-52]
    push eax
    mov eax, 2
    mov ebx, eax
    pop eax
    xor edx, edx
    idiv ebx
    mov [ebp-76], eax
    mov eax, 1
    mov [ebp-80], eax
    mov eax, 0
    mov [ebp-84], eax
    mov eax, 0
    mov [ebp-88], eax
    mov eax, 0
    mov [ebp-92], eax
    mov eax, 1
    mov [ebp-96], eax
    mov eax, 200
    mov [ebp-100], eax
    mov eax, 200
    mov [ebp-104], eax
    mov eax, 32896
    mov [ebp-108], eax
    mov eax, 1
    mov [ebp-112], eax
while_start74:
    mov eax, [ebp-112]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setne al
    movzx eax, al
    test eax, eax
    jz while_end75
    mov eax, [ebp-96]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setne al
    movzx eax, al
    test eax, eax
    jz else77
    mov eax, [ebp-28]
    push eax
    mov eax, [ebp-52]
    push eax
    mov eax, [ebp-48]
    push eax
    mov eax, [ebp-108]
    push eax
    mov eax, [ebp-52]
    push eax
    mov eax, [ebp-48]
    push eax
    mov eax, 0
    push eax
    mov eax, 0
    push eax
    mov eax, [ebp-12]
    push eax
    call fill_rect
    add esp, 36
    mov eax, 0
    mov [ebp-56], eax
while_start78:
    mov eax, [ebp-56]
    push eax
    mov eax, 8
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    test eax, eax
    jz while_end79
    mov eax, [ebp-56]
    push eax
    mov eax, [ebp-80]
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setne al
    movzx eax, al
    test eax, eax
    jz else81
    mov eax, [ebp-56]
    push eax
    mov eax, [ebp-40]
    push eax
    call get_window_ptr
    add esp, 8
    mov [ebp-116], eax
    mov eax, [ebp-28]
    push eax
    mov eax, [ebp-52]
    push eax
    mov eax, [ebp-48]
    push eax
    mov eax, 0
    push eax
    mov eax, [ebp-116]
    push eax
    mov eax, [ebp-12]
    push eax
    call draw_window
    add esp, 24
    jmp endif80
else81:
endif80:
    mov eax, [ebp-56]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-56], eax
    jmp while_start78
while_end79:
    mov eax, [ebp-80]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setge al
    movzx eax, al
    push eax
    mov eax, [ebp-80]
    push eax
    mov eax, 8
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    mov ebx, eax
    pop eax
    test eax, eax
    jz and_short84
    test ebx, ebx
    jz and_short84
    mov eax, 1
    jmp and_end85
and_short84:
    xor eax, eax
and_end85:
    test eax, eax
    jz else83
    mov eax, [ebp-80]
    push eax
    mov eax, [ebp-40]
    push eax
    call get_window_ptr
    add esp, 8
    mov [ebp-120], eax
    mov eax, [ebp-28]
    push eax
    mov eax, [ebp-52]
    push eax
    mov eax, [ebp-48]
    push eax
    mov eax, 1
    push eax
    mov eax, [ebp-120]
    push eax
    mov eax, [ebp-12]
    push eax
    call draw_window
    add esp, 24
    jmp endif82
else83:
endif82:
    mov eax, 0
    mov [ebp-96], eax
    jmp endif76
else77:
endif76:
    mov eax, [ebp-32]
    push eax
    mov eax, [ebp-52]
    push eax
    mov eax, [ebp-48]
    push eax
    mov eax, [ebp-76]
    push eax
    mov eax, [ebp-72]
    push eax
    mov eax, [ebp-12]
    push eax
    call draw_cursor
    add esp, 24
    mov eax, 3
    push eax
    mov eax, [ebp-36]
    push eax
    mov eax, [ebp-4]
    push eax
    mov eax, 3
    push eax
    call syscall3
    add esp, 16
    mov [ebp-124], eax
    mov eax, [ebp-124]
    push eax
    mov eax, 3
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else87
    mov eax, 0
    mov ebx, eax
    mov eax, [ebp-36]
    add eax, ebx
    movzx eax, byte [eax]
    mov [ebp-128], eax
    mov eax, 1
    mov ebx, eax
    mov eax, [ebp-36]
    add eax, ebx
    movzx eax, byte [eax]
    mov [ebp-132], eax
    mov eax, 2
    mov ebx, eax
    mov eax, [ebp-36]
    add eax, ebx
    movzx eax, byte [eax]
    mov [ebp-136], eax
    mov eax, [ebp-128]
    push eax
    mov eax, 16
    mov ebx, eax
    pop eax
    and eax, ebx
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setne al
    movzx eax, al
    test eax, eax
    jz else89
    mov eax, [ebp-132]
    push eax
    mov eax, 256
    mov ebx, eax
    pop eax
    sub eax, ebx
    mov [ebp-132], eax
    jmp endif88
else89:
endif88:
    mov eax, [ebp-128]
    push eax
    mov eax, 32
    mov ebx, eax
    pop eax
    and eax, ebx
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setne al
    movzx eax, al
    test eax, eax
    jz else91
    mov eax, [ebp-136]
    push eax
    mov eax, 256
    mov ebx, eax
    pop eax
    sub eax, ebx
    mov [ebp-136], eax
    jmp endif90
else91:
endif90:
    mov eax, [ebp-128]
    push eax
    mov eax, 4
    mov ebx, eax
    pop eax
    and eax, ebx
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setne al
    movzx eax, al
    test eax, eax
    jz else93
    mov eax, 0
    mov [ebp-112], eax
    jmp endif92
else93:
endif92:
    mov eax, [ebp-28]
    push eax
    mov eax, [ebp-52]
    push eax
    mov eax, [ebp-48]
    push eax
    mov eax, [ebp-108]
    push eax
    mov eax, 14
    push eax
    mov eax, 12
    push eax
    mov eax, [ebp-76]
    push eax
    mov eax, [ebp-72]
    push eax
    mov eax, [ebp-12]
    push eax
    call fill_rect
    add esp, 36
    mov eax, [ebp-72]
    push eax
    mov eax, [ebp-132]
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-72], eax
    mov eax, [ebp-76]
    push eax
    mov eax, [ebp-136]
    mov ebx, eax
    pop eax
    sub eax, ebx
    mov [ebp-76], eax
    mov eax, [ebp-72]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    test eax, eax
    jz else95
    mov eax, 0
    mov [ebp-72], eax
    jmp endif94
else95:
endif94:
    mov eax, [ebp-72]
    push eax
    mov eax, [ebp-48]
    push eax
    mov eax, 12
    mov ebx, eax
    pop eax
    sub eax, ebx
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setge al
    movzx eax, al
    test eax, eax
    jz else97
    mov eax, [ebp-48]
    push eax
    mov eax, 13
    mov ebx, eax
    pop eax
    sub eax, ebx
    mov [ebp-72], eax
    jmp endif96
else97:
endif96:
    mov eax, [ebp-76]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    test eax, eax
    jz else99
    mov eax, 0
    mov [ebp-76], eax
    jmp endif98
else99:
endif98:
    mov eax, [ebp-76]
    push eax
    mov eax, [ebp-52]
    push eax
    mov eax, 14
    mov ebx, eax
    pop eax
    sub eax, ebx
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setge al
    movzx eax, al
    test eax, eax
    jz else101
    mov eax, [ebp-52]
    push eax
    mov eax, 15
    mov ebx, eax
    pop eax
    sub eax, ebx
    mov [ebp-76], eax
    jmp endif100
else101:
endif100:
    mov eax, [ebp-84]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setne al
    movzx eax, al
    test eax, eax
    jz else103
    mov eax, [ebp-128]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    and eax, ebx
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setne al
    movzx eax, al
    test eax, eax
    jz else105
    mov eax, [ebp-80]
    push eax
    mov eax, [ebp-40]
    push eax
    call get_window_ptr
    add esp, 8
    mov [ebp-140], eax
    mov eax, [ebp-72]
    push eax
    mov eax, [ebp-88]
    mov ebx, eax
    pop eax
    sub eax, ebx
    push eax
    mov eax, 1
    push eax
    mov eax, [ebp-140]
    push eax
    call window_set
    add esp, 12
    mov eax, [ebp-76]
    push eax
    mov eax, [ebp-92]
    mov ebx, eax
    pop eax
    sub eax, ebx
    push eax
    mov eax, 2
    push eax
    mov eax, [ebp-140]
    push eax
    call window_set
    add esp, 12
    mov eax, 1
    mov [ebp-96], eax
    jmp endif104
else105:
    mov eax, 0
    mov [ebp-84], eax
endif104:
    jmp endif102
else103:
    mov eax, [ebp-128]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    and eax, ebx
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setne al
    movzx eax, al
    test eax, eax
    jz else107
    mov eax, [ebp-80]
    mov [ebp-56], eax
    mov eax, 0
    mov [ebp-144], eax
    mov eax, [ebp-144]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else109
    mov eax, [ebp-80]
    push eax
    mov eax, [ebp-40]
    push eax
    call get_window_ptr
    add esp, 8
    mov [ebp-148], eax
    mov eax, [ebp-76]
    push eax
    mov eax, [ebp-72]
    push eax
    mov eax, [ebp-148]
    push eax
    call point_on_close
    add esp, 12
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setne al
    movzx eax, al
    test eax, eax
    jz else111
    mov eax, 0
    push eax
    mov eax, 0
    push eax
    mov eax, [ebp-148]
    push eax
    call window_set
    add esp, 12
    mov eax, 1
    mov [ebp-96], eax
    mov eax, 1
    mov [ebp-144], eax
    jmp endif110
else111:
endif110:
    mov eax, [ebp-144]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    push eax
    mov eax, [ebp-76]
    push eax
    mov eax, [ebp-72]
    push eax
    mov eax, [ebp-148]
    push eax
    call point_in_titlebar
    add esp, 12
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setne al
    movzx eax, al
    mov ebx, eax
    pop eax
    test eax, eax
    jz and_short114
    test ebx, ebx
    jz and_short114
    mov eax, 1
    jmp and_end115
and_short114:
    xor eax, eax
and_end115:
    test eax, eax
    jz else113
    mov eax, 1
    mov [ebp-84], eax
    mov eax, [ebp-72]
    push eax
    mov eax, 1
    push eax
    mov eax, [ebp-148]
    push eax
    call window_get
    add esp, 8
    mov ebx, eax
    pop eax
    sub eax, ebx
    mov [ebp-88], eax
    mov eax, [ebp-76]
    push eax
    mov eax, 2
    push eax
    mov eax, [ebp-148]
    push eax
    call window_get
    add esp, 8
    mov ebx, eax
    pop eax
    sub eax, ebx
    mov [ebp-92], eax
    mov eax, 1
    mov [ebp-144], eax
    jmp endif112
else113:
endif112:
    jmp endif108
else109:
endif108:
    mov eax, [ebp-144]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else117
    mov eax, 8
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    sub eax, ebx
    mov [ebp-56], eax
while_start118:
    mov eax, [ebp-56]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setge al
    movzx eax, al
    push eax
    mov eax, [ebp-144]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    mov ebx, eax
    pop eax
    test eax, eax
    jz and_short120
    test ebx, ebx
    jz and_short120
    mov eax, 1
    jmp and_end121
and_short120:
    xor eax, eax
and_end121:
    test eax, eax
    jz while_end119
    mov eax, [ebp-56]
    push eax
    mov eax, [ebp-80]
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setne al
    movzx eax, al
    test eax, eax
    jz else123
    mov eax, [ebp-56]
    push eax
    mov eax, [ebp-40]
    push eax
    call get_window_ptr
    add esp, 8
    mov [ebp-152], eax
    mov eax, [ebp-76]
    push eax
    mov eax, [ebp-72]
    push eax
    mov eax, [ebp-152]
    push eax
    call point_in_window
    add esp, 12
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setne al
    movzx eax, al
    test eax, eax
    jz else125
    mov eax, [ebp-56]
    mov [ebp-80], eax
    mov eax, 1
    mov [ebp-96], eax
    mov eax, 1
    mov [ebp-144], eax
    jmp endif124
else125:
endif124:
    jmp endif122
else123:
endif122:
    mov eax, [ebp-56]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    sub eax, ebx
    mov [ebp-56], eax
    jmp while_start118
while_end119:
    jmp endif116
else117:
endif116:
    jmp endif106
else107:
endif106:
    mov eax, [ebp-128]
    push eax
    mov eax, 2
    mov ebx, eax
    pop eax
    and eax, ebx
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setne al
    movzx eax, al
    test eax, eax
    jz else127
    mov eax, 0
    mov [ebp-56], eax
while_start128:
    mov eax, [ebp-56]
    push eax
    mov eax, 8
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    test eax, eax
    jz while_end129
    mov eax, [ebp-56]
    push eax
    mov eax, [ebp-40]
    push eax
    call get_window_ptr
    add esp, 8
    mov [ebp-156], eax
    mov eax, 0
    push eax
    mov eax, [ebp-156]
    push eax
    call window_get
    add esp, 8
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else131
    mov eax, 1
    push eax
    mov eax, 0
    push eax
    mov eax, [ebp-156]
    push eax
    call window_set
    add esp, 12
    mov eax, [ebp-72]
    push eax
    mov eax, 1
    push eax
    mov eax, [ebp-156]
    push eax
    call window_set
    add esp, 12
    mov eax, [ebp-76]
    push eax
    mov eax, 2
    push eax
    mov eax, [ebp-156]
    push eax
    call window_set
    add esp, 12
    mov eax, 250
    push eax
    mov eax, 3
    push eax
    mov eax, [ebp-156]
    push eax
    call window_set
    add esp, 12
    mov eax, 180
    push eax
    mov eax, 4
    push eax
    mov eax, [ebp-156]
    push eax
    call window_set
    add esp, 12
    mov eax, 8388672
    push eax
    mov eax, 5
    push eax
    mov eax, [ebp-156]
    push eax
    call window_set
    add esp, 12
    mov eax, 13684944
    push eax
    mov eax, 6
    push eax
    mov eax, [ebp-156]
    push eax
    call window_set
    add esp, 12
    mov eax, [ebp-56]
    mov [ebp-80], eax
    mov eax, 1
    mov [ebp-96], eax
    mov eax, 8
    mov [ebp-56], eax
    jmp endif130
else131:
endif130:
    mov eax, [ebp-56]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-56], eax
    jmp while_start128
while_end129:
    jmp endif126
else127:
endif126:
endif102:
    jmp endif86
else87:
endif86:
    jmp while_start74
while_end75:
    mov eax, [ebp-12]
    push eax
    mov eax, 6
    push eax
    call syscall1
    add esp, 8
    mov eax, [ebp-4]
    push eax
    mov eax, 6
    push eax
    call syscall1
    add esp, 8
    lea eax, [rel str_8]
    push eax
    call print_str
    add esp, 4
    mov eax, 0
    push eax
    mov eax, 1
    push eax
    call syscall1
    add esp, 8
main_return:
    mov esp, ebp
    pop ebp
    ret