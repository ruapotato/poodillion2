; Generated by Brainhair Compiler
bits 32

extern syscall1
extern syscall2
extern syscall3

section .data
str_0: db "BrainhairOS Graphics Demo", 10, "", 0
str_1: db "/dev/fb0", 0
str_2: db "Error: Cannot open /dev/fb0", 10, "", 0
str_3: db "Error: Cannot get screen info", 10, "", 0
str_4: db "BrainhairOS", 0
str_5: db "Demo complete!", 10, "", 0

section .text
global _start
global get_argc
global get_argv

section .bss
_startup_esp: resd 1

section .text

_start:
    mov [_startup_esp], esp  ; Save initial stack pointer
    call main
    ; Exit with return code from main
    mov ebx, eax  ; Exit code
    mov eax, 1    ; sys_exit
    int 0x80

; get_argc() - returns argument count
get_argc:
    mov eax, [_startup_esp]
    mov eax, [eax]  ; argc is at [esp]
    ret

; get_argv(index) - returns pointer to argument string
get_argv:
    push ebp
    mov ebp, esp
    mov eax, [_startup_esp]
    mov ecx, [ebp+8]  ; index
    lea eax, [eax + 4 + ecx*4]  ; argv[index] = esp + 4 + index*4
    mov eax, [eax]
    pop ebp
    ret
    
print_str:
    push ebp
    mov ebp, esp
    sub esp, 4
    mov eax, 0
    mov [ebp-4], eax
while_start0:
    mov eax, [ebp-4]
    mov ebx, eax
    mov eax, [ebp+8]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setne al
    movzx eax, al
    test eax, eax
    jz while_end1
    mov eax, [ebp-4]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-4], eax
    jmp while_start0
while_end1:
    mov eax, [ebp-4]
    push eax
    mov eax, [ebp+8]
    push eax
    mov eax, 1
    push eax
    mov eax, 4
    push eax
    call syscall3
    add esp, 16
print_str_return:
    mov esp, ebp
    pop ebp
    ret
    
fill_rect:
    push ebp
    mov ebp, esp
    sub esp, 24
    mov eax, [ebp+16]
    mov [ebp-4], eax
while_start2:
    mov eax, [ebp-4]
    push eax
    mov eax, [ebp+16]
    push eax
    mov eax, [ebp+24]
    mov ebx, eax
    pop eax
    add eax, ebx
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    test eax, eax
    jz while_end3
    mov eax, [ebp-4]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setge al
    movzx eax, al
    push eax
    mov eax, [ebp-4]
    push eax
    mov eax, [ebp+36]
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    mov ebx, eax
    pop eax
    test eax, eax
    jz and_short6
    test ebx, ebx
    jz and_short6
    mov eax, 1
    jmp and_end7
and_short6:
    xor eax, eax
and_end7:
    test eax, eax
    jz else5
    mov eax, [ebp+12]
    mov [ebp-8], eax
    mov eax, [ebp+12]
    push eax
    mov eax, [ebp+20]
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-12], eax
    mov eax, [ebp-8]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    test eax, eax
    jz else9
    mov eax, 0
    mov [ebp-8], eax
    jmp endif8
else9:
endif8:
    mov eax, [ebp-12]
    push eax
    mov eax, [ebp+32]
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setg al
    movzx eax, al
    test eax, eax
    jz else11
    mov eax, [ebp+32]
    mov [ebp-12], eax
    jmp endif10
else11:
endif10:
    mov eax, [ebp-8]
    push eax
    mov eax, [ebp-12]
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    test eax, eax
    jz else13
    mov eax, [ebp-12]
    push eax
    mov eax, [ebp-8]
    mov ebx, eax
    pop eax
    sub eax, ebx
    mov [ebp-16], eax
    mov eax, 0
    mov [ebp-20], eax
while_start14:
    mov eax, [ebp-20]
    push eax
    mov eax, [ebp-16]
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    test eax, eax
    jz while_end15
    mov eax, [ebp+28]
    push eax
    mov eax, [ebp-20]
    mov ebx, eax
    mov eax, [ebp+40]
    shl ebx, 2
    add eax, ebx
    pop ebx
    mov [eax], ebx
    mov eax, [ebp-20]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-20], eax
    jmp while_start14
while_end15:
    mov eax, [ebp-4]
    push eax
    mov eax, [ebp+32]
    mov ebx, eax
    pop eax
    imul eax, ebx
    push eax
    mov eax, [ebp-8]
    mov ebx, eax
    pop eax
    add eax, ebx
    push eax
    mov eax, 4
    mov ebx, eax
    pop eax
    imul eax, ebx
    mov [ebp-24], eax
    mov eax, 0
    push eax
    mov eax, [ebp-24]
    push eax
    mov eax, [ebp+8]
    push eax
    mov eax, 19
    push eax
    call syscall3
    add esp, 16
    mov eax, [ebp-16]
    push eax
    mov eax, 4
    mov ebx, eax
    pop eax
    imul eax, ebx
    push eax
    mov eax, [ebp+40]
    push eax
    mov eax, [ebp+8]
    push eax
    mov eax, 4
    push eax
    call syscall3
    add esp, 16
    jmp endif12
else13:
endif12:
    jmp endif4
else5:
endif4:
    mov eax, [ebp-4]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-4], eax
    jmp while_start2
while_end3:
fill_rect_return:
    mov esp, ebp
    pop ebp
    ret
    
draw_pixel:
    push ebp
    mov ebp, esp
    sub esp, 4
    mov eax, [ebp+12]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setge al
    movzx eax, al
    push eax
    mov eax, [ebp+12]
    push eax
    mov eax, [ebp+24]
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    mov ebx, eax
    pop eax
    test eax, eax
    jz and_short18
    test ebx, ebx
    jz and_short18
    mov eax, 1
    jmp and_end19
and_short18:
    xor eax, eax
and_end19:
    push eax
    mov eax, [ebp+16]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setge al
    movzx eax, al
    mov ebx, eax
    pop eax
    test eax, eax
    jz and_short20
    test ebx, ebx
    jz and_short20
    mov eax, 1
    jmp and_end21
and_short20:
    xor eax, eax
and_end21:
    push eax
    mov eax, [ebp+16]
    push eax
    mov eax, [ebp+28]
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    mov ebx, eax
    pop eax
    test eax, eax
    jz and_short22
    test ebx, ebx
    jz and_short22
    mov eax, 1
    jmp and_end23
and_short22:
    xor eax, eax
and_end23:
    test eax, eax
    jz else17
    mov eax, [ebp+20]
    push eax
    mov eax, 0
    mov ebx, eax
    mov eax, [ebp+32]
    shl ebx, 2
    add eax, ebx
    pop ebx
    mov [eax], ebx
    mov eax, [ebp+16]
    push eax
    mov eax, [ebp+24]
    mov ebx, eax
    pop eax
    imul eax, ebx
    push eax
    mov eax, [ebp+12]
    mov ebx, eax
    pop eax
    add eax, ebx
    push eax
    mov eax, 4
    mov ebx, eax
    pop eax
    imul eax, ebx
    mov [ebp-4], eax
    mov eax, 0
    push eax
    mov eax, [ebp-4]
    push eax
    mov eax, [ebp+8]
    push eax
    mov eax, 19
    push eax
    call syscall3
    add esp, 16
    mov eax, 4
    push eax
    mov eax, [ebp+32]
    push eax
    mov eax, [ebp+8]
    push eax
    mov eax, 4
    push eax
    call syscall3
    add esp, 16
    jmp endif16
else17:
endif16:
draw_pixel_return:
    mov esp, ebp
    pop ebp
    ret
    
draw_circle:
    push ebp
    mov ebp, esp
    sub esp, 12
    mov eax, [ebp+20]
    mov [ebp-4], eax
    mov eax, 0
    mov [ebp-8], eax
    mov eax, 1
    push eax
    mov eax, [ebp+20]
    mov ebx, eax
    pop eax
    sub eax, ebx
    mov [ebp-12], eax
while_start24:
    mov eax, [ebp-4]
    push eax
    mov eax, [ebp-8]
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setge al
    movzx eax, al
    test eax, eax
    jz while_end25
    mov eax, [ebp+36]
    push eax
    mov eax, [ebp+32]
    push eax
    mov eax, [ebp+28]
    push eax
    mov eax, [ebp+24]
    push eax
    mov eax, [ebp+16]
    push eax
    mov eax, [ebp-8]
    mov ebx, eax
    pop eax
    add eax, ebx
    push eax
    mov eax, [ebp+12]
    push eax
    mov eax, [ebp-4]
    mov ebx, eax
    pop eax
    add eax, ebx
    push eax
    mov eax, [ebp+8]
    push eax
    call draw_pixel
    add esp, 28
    mov eax, [ebp+36]
    push eax
    mov eax, [ebp+32]
    push eax
    mov eax, [ebp+28]
    push eax
    mov eax, [ebp+24]
    push eax
    mov eax, [ebp+16]
    push eax
    mov eax, [ebp-8]
    mov ebx, eax
    pop eax
    add eax, ebx
    push eax
    mov eax, [ebp+12]
    push eax
    mov eax, [ebp-4]
    mov ebx, eax
    pop eax
    sub eax, ebx
    push eax
    mov eax, [ebp+8]
    push eax
    call draw_pixel
    add esp, 28
    mov eax, [ebp+36]
    push eax
    mov eax, [ebp+32]
    push eax
    mov eax, [ebp+28]
    push eax
    mov eax, [ebp+24]
    push eax
    mov eax, [ebp+16]
    push eax
    mov eax, [ebp-8]
    mov ebx, eax
    pop eax
    sub eax, ebx
    push eax
    mov eax, [ebp+12]
    push eax
    mov eax, [ebp-4]
    mov ebx, eax
    pop eax
    add eax, ebx
    push eax
    mov eax, [ebp+8]
    push eax
    call draw_pixel
    add esp, 28
    mov eax, [ebp+36]
    push eax
    mov eax, [ebp+32]
    push eax
    mov eax, [ebp+28]
    push eax
    mov eax, [ebp+24]
    push eax
    mov eax, [ebp+16]
    push eax
    mov eax, [ebp-8]
    mov ebx, eax
    pop eax
    sub eax, ebx
    push eax
    mov eax, [ebp+12]
    push eax
    mov eax, [ebp-4]
    mov ebx, eax
    pop eax
    sub eax, ebx
    push eax
    mov eax, [ebp+8]
    push eax
    call draw_pixel
    add esp, 28
    mov eax, [ebp+36]
    push eax
    mov eax, [ebp+32]
    push eax
    mov eax, [ebp+28]
    push eax
    mov eax, [ebp+24]
    push eax
    mov eax, [ebp+16]
    push eax
    mov eax, [ebp-4]
    mov ebx, eax
    pop eax
    add eax, ebx
    push eax
    mov eax, [ebp+12]
    push eax
    mov eax, [ebp-8]
    mov ebx, eax
    pop eax
    add eax, ebx
    push eax
    mov eax, [ebp+8]
    push eax
    call draw_pixel
    add esp, 28
    mov eax, [ebp+36]
    push eax
    mov eax, [ebp+32]
    push eax
    mov eax, [ebp+28]
    push eax
    mov eax, [ebp+24]
    push eax
    mov eax, [ebp+16]
    push eax
    mov eax, [ebp-4]
    mov ebx, eax
    pop eax
    add eax, ebx
    push eax
    mov eax, [ebp+12]
    push eax
    mov eax, [ebp-8]
    mov ebx, eax
    pop eax
    sub eax, ebx
    push eax
    mov eax, [ebp+8]
    push eax
    call draw_pixel
    add esp, 28
    mov eax, [ebp+36]
    push eax
    mov eax, [ebp+32]
    push eax
    mov eax, [ebp+28]
    push eax
    mov eax, [ebp+24]
    push eax
    mov eax, [ebp+16]
    push eax
    mov eax, [ebp-4]
    mov ebx, eax
    pop eax
    sub eax, ebx
    push eax
    mov eax, [ebp+12]
    push eax
    mov eax, [ebp-8]
    mov ebx, eax
    pop eax
    add eax, ebx
    push eax
    mov eax, [ebp+8]
    push eax
    call draw_pixel
    add esp, 28
    mov eax, [ebp+36]
    push eax
    mov eax, [ebp+32]
    push eax
    mov eax, [ebp+28]
    push eax
    mov eax, [ebp+24]
    push eax
    mov eax, [ebp+16]
    push eax
    mov eax, [ebp-4]
    mov ebx, eax
    pop eax
    sub eax, ebx
    push eax
    mov eax, [ebp+12]
    push eax
    mov eax, [ebp-8]
    mov ebx, eax
    pop eax
    sub eax, ebx
    push eax
    mov eax, [ebp+8]
    push eax
    call draw_pixel
    add esp, 28
    mov eax, [ebp-8]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-8], eax
    mov eax, [ebp-12]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    test eax, eax
    jz else27
    mov eax, [ebp-12]
    push eax
    mov eax, 2
    push eax
    mov eax, [ebp-8]
    mov ebx, eax
    pop eax
    imul eax, ebx
    mov ebx, eax
    pop eax
    add eax, ebx
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-12], eax
    jmp endif26
else27:
    mov eax, [ebp-4]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    sub eax, ebx
    mov [ebp-4], eax
    mov eax, [ebp-12]
    push eax
    mov eax, 2
    push eax
    mov eax, [ebp-8]
    push eax
    mov eax, [ebp-4]
    mov ebx, eax
    pop eax
    sub eax, ebx
    mov ebx, eax
    pop eax
    imul eax, ebx
    mov ebx, eax
    pop eax
    add eax, ebx
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-12], eax
endif26:
    jmp while_start24
while_end25:
draw_circle_return:
    mov esp, ebp
    pop ebp
    ret
    
draw_rect:
    push ebp
    mov ebp, esp
    sub esp, 4
    mov eax, [ebp+40]
    push eax
    mov eax, [ebp+36]
    push eax
    mov eax, [ebp+32]
    push eax
    mov eax, [ebp+28]
    push eax
    mov eax, 1
    push eax
    mov eax, [ebp+20]
    push eax
    mov eax, [ebp+16]
    push eax
    mov eax, [ebp+12]
    push eax
    mov eax, [ebp+8]
    push eax
    call fill_rect
    add esp, 36
    mov eax, [ebp+40]
    push eax
    mov eax, [ebp+36]
    push eax
    mov eax, [ebp+32]
    push eax
    mov eax, [ebp+28]
    push eax
    mov eax, 1
    push eax
    mov eax, [ebp+20]
    push eax
    mov eax, [ebp+16]
    push eax
    mov eax, [ebp+24]
    mov ebx, eax
    pop eax
    add eax, ebx
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    sub eax, ebx
    push eax
    mov eax, [ebp+12]
    push eax
    mov eax, [ebp+8]
    push eax
    call fill_rect
    add esp, 36
    mov eax, 0
    mov [ebp-4], eax
while_start28:
    mov eax, [ebp-4]
    push eax
    mov eax, [ebp+24]
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    test eax, eax
    jz while_end29
    mov eax, [ebp+44]
    push eax
    mov eax, [ebp+36]
    push eax
    mov eax, [ebp+32]
    push eax
    mov eax, [ebp+28]
    push eax
    mov eax, [ebp+16]
    push eax
    mov eax, [ebp-4]
    mov ebx, eax
    pop eax
    add eax, ebx
    push eax
    mov eax, [ebp+12]
    push eax
    mov eax, [ebp+8]
    push eax
    call draw_pixel
    add esp, 28
    mov eax, [ebp+44]
    push eax
    mov eax, [ebp+36]
    push eax
    mov eax, [ebp+32]
    push eax
    mov eax, [ebp+28]
    push eax
    mov eax, [ebp+16]
    push eax
    mov eax, [ebp-4]
    mov ebx, eax
    pop eax
    add eax, ebx
    push eax
    mov eax, [ebp+12]
    push eax
    mov eax, [ebp+20]
    mov ebx, eax
    pop eax
    add eax, ebx
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    sub eax, ebx
    push eax
    mov eax, [ebp+8]
    push eax
    call draw_pixel
    add esp, 28
    mov eax, [ebp-4]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-4], eax
    jmp while_start28
while_end29:
draw_rect_return:
    mov esp, ebp
    pop ebp
    ret
    
get_font_row:
    push ebp
    mov ebp, esp
    mov eax, [ebp+8]
    push eax
    mov eax, 32
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else31
    mov eax, 0
    jmp get_font_row_return
    jmp endif30
else31:
endif30:
    mov eax, [ebp+8]
    push eax
    mov eax, 66
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else33
    mov eax, [ebp+12]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else35
    mov eax, 124
    jmp get_font_row_return
    jmp endif34
else35:
endif34:
    mov eax, [ebp+12]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else37
    mov eax, 102
    jmp get_font_row_return
    jmp endif36
else37:
endif36:
    mov eax, [ebp+12]
    push eax
    mov eax, 2
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else39
    mov eax, 102
    jmp get_font_row_return
    jmp endif38
else39:
endif38:
    mov eax, [ebp+12]
    push eax
    mov eax, 3
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else41
    mov eax, 124
    jmp get_font_row_return
    jmp endif40
else41:
endif40:
    mov eax, [ebp+12]
    push eax
    mov eax, 4
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else43
    mov eax, 102
    jmp get_font_row_return
    jmp endif42
else43:
endif42:
    mov eax, [ebp+12]
    push eax
    mov eax, 5
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else45
    mov eax, 102
    jmp get_font_row_return
    jmp endif44
else45:
endif44:
    mov eax, [ebp+12]
    push eax
    mov eax, 6
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else47
    mov eax, 124
    jmp get_font_row_return
    jmp endif46
else47:
endif46:
    mov eax, 0
    jmp get_font_row_return
    jmp endif32
else33:
endif32:
    mov eax, [ebp+8]
    push eax
    mov eax, 68
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else49
    mov eax, [ebp+12]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else51
    mov eax, 120
    jmp get_font_row_return
    jmp endif50
else51:
endif50:
    mov eax, [ebp+12]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else53
    mov eax, 108
    jmp get_font_row_return
    jmp endif52
else53:
endif52:
    mov eax, [ebp+12]
    push eax
    mov eax, 2
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else55
    mov eax, 102
    jmp get_font_row_return
    jmp endif54
else55:
endif54:
    mov eax, [ebp+12]
    push eax
    mov eax, 3
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else57
    mov eax, 102
    jmp get_font_row_return
    jmp endif56
else57:
endif56:
    mov eax, [ebp+12]
    push eax
    mov eax, 4
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else59
    mov eax, 102
    jmp get_font_row_return
    jmp endif58
else59:
endif58:
    mov eax, [ebp+12]
    push eax
    mov eax, 5
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else61
    mov eax, 108
    jmp get_font_row_return
    jmp endif60
else61:
endif60:
    mov eax, [ebp+12]
    push eax
    mov eax, 6
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else63
    mov eax, 120
    jmp get_font_row_return
    jmp endif62
else63:
endif62:
    mov eax, 0
    jmp get_font_row_return
    jmp endif48
else49:
endif48:
    mov eax, [ebp+8]
    push eax
    mov eax, 79
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else65
    mov eax, [ebp+12]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else67
    mov eax, 60
    jmp get_font_row_return
    jmp endif66
else67:
endif66:
    mov eax, [ebp+12]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else69
    mov eax, 102
    jmp get_font_row_return
    jmp endif68
else69:
endif68:
    mov eax, [ebp+12]
    push eax
    mov eax, 2
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else71
    mov eax, 102
    jmp get_font_row_return
    jmp endif70
else71:
endif70:
    mov eax, [ebp+12]
    push eax
    mov eax, 3
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else73
    mov eax, 102
    jmp get_font_row_return
    jmp endif72
else73:
endif72:
    mov eax, [ebp+12]
    push eax
    mov eax, 4
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else75
    mov eax, 102
    jmp get_font_row_return
    jmp endif74
else75:
endif74:
    mov eax, [ebp+12]
    push eax
    mov eax, 5
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else77
    mov eax, 102
    jmp get_font_row_return
    jmp endif76
else77:
endif76:
    mov eax, [ebp+12]
    push eax
    mov eax, 6
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else79
    mov eax, 60
    jmp get_font_row_return
    jmp endif78
else79:
endif78:
    mov eax, 0
    jmp get_font_row_return
    jmp endif64
else65:
endif64:
    mov eax, [ebp+8]
    push eax
    mov eax, 83
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else81
    mov eax, [ebp+12]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else83
    mov eax, 60
    jmp get_font_row_return
    jmp endif82
else83:
endif82:
    mov eax, [ebp+12]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else85
    mov eax, 96
    jmp get_font_row_return
    jmp endif84
else85:
endif84:
    mov eax, [ebp+12]
    push eax
    mov eax, 2
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else87
    mov eax, 60
    jmp get_font_row_return
    jmp endif86
else87:
endif86:
    mov eax, [ebp+12]
    push eax
    mov eax, 3
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else89
    mov eax, 6
    jmp get_font_row_return
    jmp endif88
else89:
endif88:
    mov eax, [ebp+12]
    push eax
    mov eax, 4
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else91
    mov eax, 6
    jmp get_font_row_return
    jmp endif90
else91:
endif90:
    mov eax, [ebp+12]
    push eax
    mov eax, 5
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else93
    mov eax, 102
    jmp get_font_row_return
    jmp endif92
else93:
endif92:
    mov eax, [ebp+12]
    push eax
    mov eax, 6
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else95
    mov eax, 60
    jmp get_font_row_return
    jmp endif94
else95:
endif94:
    mov eax, 0
    jmp get_font_row_return
    jmp endif80
else81:
endif80:
    mov eax, [ebp+8]
    push eax
    mov eax, 97
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else97
    mov eax, [ebp+12]
    push eax
    mov eax, 2
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else99
    mov eax, 60
    jmp get_font_row_return
    jmp endif98
else99:
endif98:
    mov eax, [ebp+12]
    push eax
    mov eax, 3
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else101
    mov eax, 6
    jmp get_font_row_return
    jmp endif100
else101:
endif100:
    mov eax, [ebp+12]
    push eax
    mov eax, 4
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else103
    mov eax, 62
    jmp get_font_row_return
    jmp endif102
else103:
endif102:
    mov eax, [ebp+12]
    push eax
    mov eax, 5
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else105
    mov eax, 102
    jmp get_font_row_return
    jmp endif104
else105:
endif104:
    mov eax, [ebp+12]
    push eax
    mov eax, 6
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else107
    mov eax, 62
    jmp get_font_row_return
    jmp endif106
else107:
endif106:
    mov eax, 0
    jmp get_font_row_return
    jmp endif96
else97:
endif96:
    mov eax, [ebp+8]
    push eax
    mov eax, 104
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else109
    mov eax, [ebp+12]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else111
    mov eax, 96
    jmp get_font_row_return
    jmp endif110
else111:
endif110:
    mov eax, [ebp+12]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else113
    mov eax, 96
    jmp get_font_row_return
    jmp endif112
else113:
endif112:
    mov eax, [ebp+12]
    push eax
    mov eax, 2
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else115
    mov eax, 124
    jmp get_font_row_return
    jmp endif114
else115:
endif114:
    mov eax, [ebp+12]
    push eax
    mov eax, 3
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else117
    mov eax, 102
    jmp get_font_row_return
    jmp endif116
else117:
endif116:
    mov eax, [ebp+12]
    push eax
    mov eax, 4
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else119
    mov eax, 102
    jmp get_font_row_return
    jmp endif118
else119:
endif118:
    mov eax, [ebp+12]
    push eax
    mov eax, 5
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else121
    mov eax, 102
    jmp get_font_row_return
    jmp endif120
else121:
endif120:
    mov eax, [ebp+12]
    push eax
    mov eax, 6
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else123
    mov eax, 102
    jmp get_font_row_return
    jmp endif122
else123:
endif122:
    mov eax, 0
    jmp get_font_row_return
    jmp endif108
else109:
endif108:
    mov eax, [ebp+8]
    push eax
    mov eax, 105
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else125
    mov eax, [ebp+12]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else127
    mov eax, 24
    jmp get_font_row_return
    jmp endif126
else127:
endif126:
    mov eax, [ebp+12]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else129
    mov eax, 0
    jmp get_font_row_return
    jmp endif128
else129:
endif128:
    mov eax, [ebp+12]
    push eax
    mov eax, 2
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else131
    mov eax, 56
    jmp get_font_row_return
    jmp endif130
else131:
endif130:
    mov eax, [ebp+12]
    push eax
    mov eax, 3
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else133
    mov eax, 24
    jmp get_font_row_return
    jmp endif132
else133:
endif132:
    mov eax, [ebp+12]
    push eax
    mov eax, 4
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else135
    mov eax, 24
    jmp get_font_row_return
    jmp endif134
else135:
endif134:
    mov eax, [ebp+12]
    push eax
    mov eax, 5
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else137
    mov eax, 24
    jmp get_font_row_return
    jmp endif136
else137:
endif136:
    mov eax, [ebp+12]
    push eax
    mov eax, 6
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else139
    mov eax, 60
    jmp get_font_row_return
    jmp endif138
else139:
endif138:
    mov eax, 0
    jmp get_font_row_return
    jmp endif124
else125:
endif124:
    mov eax, [ebp+8]
    push eax
    mov eax, 110
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else141
    mov eax, [ebp+12]
    push eax
    mov eax, 2
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else143
    mov eax, 124
    jmp get_font_row_return
    jmp endif142
else143:
endif142:
    mov eax, [ebp+12]
    push eax
    mov eax, 3
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else145
    mov eax, 102
    jmp get_font_row_return
    jmp endif144
else145:
endif144:
    mov eax, [ebp+12]
    push eax
    mov eax, 4
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else147
    mov eax, 102
    jmp get_font_row_return
    jmp endif146
else147:
endif146:
    mov eax, [ebp+12]
    push eax
    mov eax, 5
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else149
    mov eax, 102
    jmp get_font_row_return
    jmp endif148
else149:
endif148:
    mov eax, [ebp+12]
    push eax
    mov eax, 6
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else151
    mov eax, 102
    jmp get_font_row_return
    jmp endif150
else151:
endif150:
    mov eax, 0
    jmp get_font_row_return
    jmp endif140
else141:
endif140:
    mov eax, [ebp+8]
    push eax
    mov eax, 114
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else153
    mov eax, [ebp+12]
    push eax
    mov eax, 2
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else155
    mov eax, 110
    jmp get_font_row_return
    jmp endif154
else155:
endif154:
    mov eax, [ebp+12]
    push eax
    mov eax, 3
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else157
    mov eax, 118
    jmp get_font_row_return
    jmp endif156
else157:
endif156:
    mov eax, [ebp+12]
    push eax
    mov eax, 4
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else159
    mov eax, 96
    jmp get_font_row_return
    jmp endif158
else159:
endif158:
    mov eax, [ebp+12]
    push eax
    mov eax, 5
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else161
    mov eax, 96
    jmp get_font_row_return
    jmp endif160
else161:
endif160:
    mov eax, [ebp+12]
    push eax
    mov eax, 6
    mov ebx, eax
    pop eax
    cmp eax, ebx
    sete al
    movzx eax, al
    test eax, eax
    jz else163
    mov eax, 96
    jmp get_font_row_return
    jmp endif162
else163:
endif162:
    mov eax, 0
    jmp get_font_row_return
    jmp endif152
else153:
endif152:
    mov eax, 0
    jmp get_font_row_return
get_font_row_return:
    mov esp, ebp
    pop ebp
    ret
    
draw_char:
    push ebp
    mov ebp, esp
    sub esp, 12
    mov eax, 0
    mov [ebp-4], eax
while_start164:
    mov eax, [ebp-4]
    push eax
    mov eax, 8
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    test eax, eax
    jz while_end165
    mov eax, [ebp-4]
    push eax
    mov eax, [ebp+20]
    push eax
    call get_font_row
    add esp, 8
    mov [ebp-8], eax
    mov eax, 0
    mov [ebp-12], eax
while_start166:
    mov eax, [ebp-12]
    push eax
    mov eax, 8
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    test eax, eax
    jz while_end167
    mov eax, [ebp-8]
    push eax
    mov eax, 7
    push eax
    mov eax, [ebp-12]
    mov ebx, eax
    pop eax
    sub eax, ebx
    mov ebx, eax
    pop eax
    mov ecx, ebx
    shr eax, cl
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    and eax, ebx
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setne al
    movzx eax, al
    test eax, eax
    jz else169
    mov eax, [ebp+36]
    push eax
    mov eax, [ebp+32]
    push eax
    mov eax, [ebp+28]
    push eax
    mov eax, [ebp+24]
    push eax
    mov eax, [ebp+16]
    push eax
    mov eax, [ebp-4]
    mov ebx, eax
    pop eax
    add eax, ebx
    push eax
    mov eax, [ebp+12]
    push eax
    mov eax, [ebp-12]
    mov ebx, eax
    pop eax
    add eax, ebx
    push eax
    mov eax, [ebp+8]
    push eax
    call draw_pixel
    add esp, 28
    jmp endif168
else169:
endif168:
    mov eax, [ebp-12]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-12], eax
    jmp while_start166
while_end167:
    mov eax, [ebp-4]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-4], eax
    jmp while_start164
while_end165:
draw_char_return:
    mov esp, ebp
    pop ebp
    ret
    
draw_text:
    push ebp
    mov ebp, esp
    sub esp, 8
    mov eax, [ebp+12]
    mov [ebp-4], eax
    mov eax, 0
    mov [ebp-8], eax
while_start170:
    mov eax, [ebp-8]
    mov ebx, eax
    mov eax, [ebp+20]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setne al
    movzx eax, al
    test eax, eax
    jz while_end171
    mov eax, [ebp+36]
    push eax
    mov eax, [ebp+32]
    push eax
    mov eax, [ebp+28]
    push eax
    mov eax, [ebp+24]
    push eax
    mov eax, [ebp-8]
    mov ebx, eax
    mov eax, [ebp+20]
    add eax, ebx
    movzx eax, byte [eax]
    push eax
    mov eax, [ebp+16]
    push eax
    mov eax, [ebp-4]
    push eax
    mov eax, [ebp+8]
    push eax
    call draw_char
    add esp, 32
    mov eax, [ebp-4]
    push eax
    mov eax, 8
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-4], eax
    mov eax, [ebp-8]
    push eax
    mov eax, 1
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-8], eax
    jmp while_start170
while_end171:
draw_text_return:
    mov esp, ebp
    pop ebp
    ret
    
main:
    push ebp
    mov ebp, esp
    sub esp, 36
    lea eax, [rel str_0]
    push eax
    call print_str
    add esp, 4
    mov eax, 2
    push eax
    lea eax, [rel str_1]
    push eax
    mov eax, 5
    push eax
    call syscall2
    add esp, 12
    mov [ebp-4], eax
    mov eax, [ebp-4]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    test eax, eax
    jz else173
    lea eax, [rel str_2]
    push eax
    call print_str
    add esp, 4
    mov eax, 1
    push eax
    mov eax, 1
    push eax
    call syscall1
    add esp, 8
    jmp endif172
else173:
endif172:
    mov eax, 0
    push eax
    mov eax, 45
    push eax
    call syscall1
    add esp, 8
    mov [ebp-8], eax
    mov eax, [ebp-8]
    push eax
    mov eax, 16384
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-12], eax
    mov eax, [ebp-12]
    push eax
    mov eax, 45
    push eax
    call syscall1
    add esp, 8
    mov eax, [ebp-8]
    mov [ebp-16], eax
    mov eax, [ebp-8]
    push eax
    mov eax, 256
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-20], eax
    mov eax, [ebp-8]
    push eax
    mov eax, 8192
    mov ebx, eax
    pop eax
    add eax, ebx
    mov [ebp-24], eax
    mov eax, [ebp-16]
    push eax
    mov eax, 17920
    push eax
    mov eax, [ebp-4]
    push eax
    mov eax, 54
    push eax
    call syscall3
    add esp, 16
    mov [ebp-28], eax
    mov eax, [ebp-28]
    push eax
    mov eax, 0
    mov ebx, eax
    pop eax
    cmp eax, ebx
    setl al
    movzx eax, al
    test eax, eax
    jz else175
    lea eax, [rel str_3]
    push eax
    call print_str
    add esp, 4
    mov eax, [ebp-4]
    push eax
    mov eax, 6
    push eax
    call syscall1
    add esp, 8
    mov eax, 1
    push eax
    mov eax, 1
    push eax
    call syscall1
    add esp, 8
    jmp endif174
else175:
endif174:
    mov eax, 0
    mov ebx, eax
    mov eax, [ebp-16]
    shl ebx, 2
    add eax, ebx
    mov eax, [eax]
    mov [ebp-32], eax
    mov eax, 1
    mov ebx, eax
    mov eax, [ebp-16]
    shl ebx, 2
    add eax, ebx
    mov eax, [eax]
    mov [ebp-36], eax
    mov eax, [ebp-20]
    push eax
    mov eax, [ebp-36]
    push eax
    mov eax, [ebp-32]
    push eax
    mov eax, 4144
    push eax
    mov eax, [ebp-36]
    push eax
    mov eax, [ebp-32]
    push eax
    mov eax, 0
    push eax
    mov eax, 0
    push eax
    mov eax, [ebp-4]
    push eax
    call fill_rect
    add esp, 36
    mov eax, [ebp-20]
    push eax
    mov eax, [ebp-36]
    push eax
    mov eax, [ebp-32]
    push eax
    mov eax, 43520
    push eax
    mov eax, 100
    push eax
    mov eax, 200
    push eax
    mov eax, 50
    push eax
    mov eax, 50
    push eax
    mov eax, [ebp-4]
    push eax
    call fill_rect
    add esp, 36
    mov eax, [ebp-24]
    push eax
    mov eax, [ebp-20]
    push eax
    mov eax, [ebp-36]
    push eax
    mov eax, [ebp-32]
    push eax
    mov eax, 16711680
    push eax
    mov eax, 100
    push eax
    mov eax, 150
    push eax
    mov eax, 50
    push eax
    mov eax, 300
    push eax
    mov eax, [ebp-4]
    push eax
    call draw_rect
    add esp, 40
    mov eax, [ebp-24]
    push eax
    mov eax, [ebp-36]
    push eax
    mov eax, [ebp-32]
    push eax
    mov eax, 16776960
    push eax
    mov eax, 40
    push eax
    mov eax, 100
    push eax
    mov eax, 550
    push eax
    mov eax, [ebp-4]
    push eax
    call draw_circle
    add esp, 32
    mov eax, [ebp-24]
    push eax
    mov eax, [ebp-36]
    push eax
    mov eax, [ebp-32]
    push eax
    mov eax, 16755200
    push eax
    mov eax, 30
    push eax
    mov eax, 100
    push eax
    mov eax, 550
    push eax
    mov eax, [ebp-4]
    push eax
    call draw_circle
    add esp, 32
    mov eax, [ebp-24]
    push eax
    mov eax, [ebp-36]
    push eax
    mov eax, [ebp-32]
    push eax
    mov eax, 16733440
    push eax
    mov eax, 20
    push eax
    mov eax, 100
    push eax
    mov eax, 550
    push eax
    mov eax, [ebp-4]
    push eax
    call draw_circle
    add esp, 32
    mov eax, [ebp-24]
    push eax
    mov eax, [ebp-36]
    push eax
    mov eax, [ebp-32]
    push eax
    mov eax, 16777215
    push eax
    lea eax, [rel str_4]
    push eax
    mov eax, 200
    push eax
    mov eax, 50
    push eax
    mov eax, [ebp-4]
    push eax
    call draw_text
    add esp, 32
    mov eax, [ebp-20]
    push eax
    mov eax, [ebp-36]
    push eax
    mov eax, [ebp-32]
    push eax
    mov eax, 34952
    push eax
    mov eax, 30
    push eax
    mov eax, [ebp-32]
    push eax
    mov eax, [ebp-36]
    push eax
    mov eax, 30
    mov ebx, eax
    pop eax
    sub eax, ebx
    push eax
    mov eax, 0
    push eax
    mov eax, [ebp-4]
    push eax
    call fill_rect
    add esp, 36
    mov eax, [ebp-4]
    push eax
    mov eax, 6
    push eax
    call syscall1
    add esp, 8
    lea eax, [rel str_5]
    push eax
    call print_str
    add esp, 4
    mov eax, 0
    push eax
    mov eax, 1
    push eax
    call syscall1
    add esp, 8
main_return:
    mov esp, ebp
    pop ebp
    ret